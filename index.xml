<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sinowrt on Sinowrt</title>
    <link>http://blog.sinowrt.cn/</link>
    <description>Recent content in Sinowrt on Sinowrt</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 03 May 2022 21:45:00 +0800</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>å·§ç”¨IOSçš„BLEå®ç°ä¸Šä¸‹ç­æ‰“å¡æé†’ï¼ˆPythonå®ç°ï¼‰</title>
      <link>http://blog.sinowrt.cn/2022/2022-05-03t2145-using-ios-ble-to-remind-me-clock-inpython-implement/</link>
      <pubDate>Tue, 03 May 2022 21:45:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-05-03t2145-using-ios-ble-to-remind-me-clock-inpython-implement/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;å› ä¸ºå…¬å¸ä½¿ç”¨åˆ·è„¸æ‰“å¡ï¼Œè¿™å°±å¯¼è‡´æœ‰æ—¶å€™æ‰“äº†å¡ï¼Œå´çªç„¶å¤±å¿†ï¼Œå¿˜äº†è‡ªå·±æœ‰æ²¡æœ‰æ‰“å¡ï¼›æˆ–è€…ç›´æ¥å°±å¿˜äº†æ‰“å¡ï¼Œå¹¶ä¸”ä¹Ÿå¿˜äº†è‡ªå·±æœ‰æ²¡æœ‰æ‰“å¡ã€‚è¿™å‡ ç§æƒ…å†µéƒ½å®å®åœ¨åœ¨å‘ç”Ÿè¿‡çš„ï¼Œä¸Šä¸ªç­è¿˜è¦æ—¶æ—¶åˆ»åˆ»å»å›å¿†æœ‰æ²¡æœ‰æ‰“å¡å®åœ¨æ˜¯éå¸¸ç—›è‹¦çš„ä¸€ä»¶äº‹ã€‚æ‰€ä»¥ä¸€ç›´å°±æƒ³åšä¸€ä¸ªæé†’æ‰“å¡çš„å°ç¨‹åºã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è®¾æƒ³çš„å‡ ç§æ–¹æ¡ˆ&#34;&gt;0x01 è®¾æƒ³çš„å‡ ç§æ–¹æ¡ˆ&lt;/h2&gt;

&lt;p&gt;ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œæ˜¯åŸºäºIOSå¿«æ·æŒ‡ä»¤çš„è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼Œè®¾ç½®åˆ°è¾¾æˆ–è€…ç¦»å¼€ç›®çš„åœ°çš„æé†’ï¼Œä½†æ˜¯è¿™ä¸ªè‡ªåŠ¨åŒ–çš„æ–¹å¼éå¸¸é¸¡è‚‹ï¼Œä¸€ä¸ªæ˜¯è§¦å‘ä¹‹åï¼Œè¿˜è¦æ‰‹åŠ¨ç‚¹è¿è¡Œï¼›äºŒæ˜¯åˆ°è¾¾æˆ–ç¦»å¼€ç›®çš„åœ°æ ¹æœ¬å°±ä¸æé†’ï¼Œåè€Œæ˜¯æ¯æ¬¡èµ°åˆ°å®šä½åœ°å€å¤–çš„ä¸€ä¸ªå‡†ç¡®ä½ç½®ï¼Œåè€Œåˆä¼šå‡†ç¡®æé†’ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯åœ°å›¾ä½ç½®æœ‰åç§»è¿˜æ˜¯å’‹æ»´ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯æƒ³èµ·ä¹‹å‰é˜¿é‡Œå…¬ä¼—å·ä¸­çš„ä¸€ç¯‡&lt;a href=&#34;https://mp.weixin.qq.com/s/7jVa-K-qUlYIrCg3YpPSEQ&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;æ–‡ç« &lt;/a&gt;ï¼Œå°±è®²åˆ°åœ¨å¤–å–å–é¤çš„åœºæ™¯ä¸­ï¼Œå¦‚ä½•å‡†ç¡®è¯†åˆ«å¤–å–å°å“¥åˆ°åº—å–é¤çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™ç»™äº†æˆ‘å¾ˆå¤§çš„å¯å‘ï¼Œè¯¥åœºæ™¯è·Ÿæˆ‘ä¸Šä¸‹ç­çš„åœºæ™¯å¾ˆæ˜¯å¥‘åˆï¼Œåªè¦åœ¨åˆ°åº—ï¼ˆåˆ°å…¬å¸ä¸Šç­ï¼‰è¯†åˆ«çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šç¦»åº—ï¼ˆä¸‹ç­å›å®¶ï¼‰è¯†åˆ«çš„åŠŸèƒ½å³å¯ã€‚å¼€å¹²ï¼&lt;/p&gt;

&lt;h2 id=&#34;0x02-èµ„æ–™æ”¶é›†&#34;&gt;0x02 èµ„æ–™æ”¶é›†&lt;/h2&gt;

&lt;p&gt;éµå¾ªä¸é‡å¤é€ è½®å­åŸåˆ™ï¼Œæˆ‘é¦–å…ˆåœ¨ç½‘ä¸Šæœé›†äº†ä¸€ä¸‹ç›¸å…³çš„ä¿¡æ¯ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ç°æˆçš„æ–¹æ¡ˆã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆåœ¨çŸ¥ä¹æ‰¾åˆ°äº†&lt;a href=&#34;https://zhuanlan.zhihu.com/p/136898412&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;ã€Šæ€»æ˜¯å¿˜æ‰“å¡ï¼Ÿç”¨iBeaconæé†’ä½ ï¼ã€‹&lt;/a&gt;è¿™ç¯‡æ–‡ç« ï¼Œä½œè€…åœ¨ä¸‡èƒ½æ·˜å®ä¸Šè´­ä¹°çš„iBeaconä¿¡æ ‡ï¼Œä½¿ç”¨Pythonæ­é…pybluezåº“æ¢æµ‹iBeaconä¿¡å·ï¼Œæ ¹æ®iBeaconä¿¡å·çš„æ¶ˆå¤±æˆ–è€…å‡ºç°æ¥åˆ¤æ–­ä½œè€…ä¸Šç­ä¸ä¸‹ç­çš„çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æ®äº†è§£ï¼ŒiPhoneæ˜¯ä¼šæŒç»­å‘å¤–å‘å°„BLEä¿¡å·çš„ï¼Œæ—¢ç„¶æœ‰ç°æˆçš„ä¿¡å·æºï¼Œå°±ä¸ç”¨ä¹°ä¸‡èƒ½æ·˜å®çš„iBeaconä¿¡æ ‡äº†ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºiPhoneçš„BLEå¹¿æ’­çš„æ˜¯éšæœºåœ°å€ï¼Œé‚£ä¹ˆè¦å¦‚ä½•å”¯ä¸€ç¡®å®šè¯¥éšæœºåœ°å€æ˜¯æˆ‘çš„è®¾å¤‡å‘¢? é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“éšæœºåœ°å€æ˜¯ä»€ä¹ˆæ„æ€ï¼Œéšæœºåœ°å€æ˜¯è“ç‰™æ ¸å¿ƒè§„èŒƒä¸­çš„ä¸€ä¸ªè¯æ¡ï¼Œé‚£ä¹ˆåœ¨è“ç‰™æ ¸å¿ƒè§„èŒƒä¸­å¿…ç„¶ä¼šæœ‰&amp;rdquo;éšæœºåœ°å€&amp;rdquo;çš„å®šä¹‰å’Œæè¿°ï¼Œé™„ä¸Š&lt;a href=&#34;https://www.bluetooth.com/zh-cn/specifications/specs/core-specification-5-3/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;è“ç‰™æ ¸å¿ƒè§„èŒƒ5.3ä¸‹è½½é“¾æ¥&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x03-å®ç°æ–¹æ¡ˆ&#34;&gt;0x03 å®ç°æ–¹æ¡ˆ&lt;/h2&gt;

&lt;p&gt;æ ¹æ®è“ç‰™æ ¸å¿ƒè§„èŒƒ5.3ä¸­&lt;code&gt;[Vol 6] Part B, Section 1.3.2.3&lt;/code&gt;çš„æè¿°ï¼Œå¯è§£æéšæœºåœ°å€ï¼ˆiPhone BLEä½¿ç”¨çš„æ­£æ˜¯å¯è§£æéšæœºåœ°å€ï¼‰å¯ä»¥ä½¿ç”¨è®¾å¤‡é…å¯¹è¿‡ç¨‹ä¸­äº§ç”Ÿçš„IRKè¿›è¡Œè§£æ&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å°†IRKä»¥åŠéšæœºåœ°å€çš„å‰24ä½prandä½œä¸ºè¾“å…¥ï¼Œç„¶åprandéœ€è¦è¡¥é½128ä½å˜ä¸ºr&amp;rsquo;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;[Vol 3] Part H, Section 2.2.2&lt;/code&gt;çš„ahå“ˆå¸Œå‡½æ•°ï¼Œè¿›è¡Œah(IRK,r&amp;rsquo;)ï¼Œahå‡½æ•°å®é™…ä¸Šå°±æ˜¯&lt;a href=&#34;https://csrc.nist.gov/csrc/media/publications/fips/197/final/documents/fips-197.pdf&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;NIST Publication FIPS-197&lt;/a&gt;ä¸­æè¿°çš„AES-128åŠ å¯†ï¼ŒIRKä½œä¸ºkeyï¼Œr&amp;rsquo;ä½œä¸ºplaintext&lt;/li&gt;
&lt;li&gt;å–ahå“ˆå¸Œè¿ç®—ç»“æœçš„æœ€å24ä½ï¼Œè·Ÿéšæœºåœ°å€çš„å24ä½è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥ä¸€æ ·åˆ™å¯åˆ¤æ–­ä¸ºåŒä¸€è®¾å¤‡ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;0x04-è¿è¡Œç¯å¢ƒçš„é€‰æ‹©&#34;&gt;0x04 è¿è¡Œç¯å¢ƒçš„é€‰æ‹©&lt;/h2&gt;

&lt;p&gt;æˆ‘è„‘æµ·ä¸­æœ€å…ˆæƒ³åˆ°çš„æ˜¯æ ‘è“æ´¾ï¼Œä½œä¸ºä¸€ä¸ªwifi è“ç‰™ æœ‰çº¿åŠŸèƒ½å®Œå¤‡ï¼Œè½¯ä»¶æ”¯æŒå®Œæ•´ï¼Œå³æ’å³ç”¨ï¼Œå¹¶ä¸”æŠ€æœ¯æˆç†Ÿçš„ARMè®¾å¤‡ï¼Œç¡®å®æ˜¯å®ç°å„ç§å°åŠŸèƒ½çš„é¦–é€‰è®¾å¤‡ã€‚&lt;/p&gt;

&lt;p&gt;ç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆä¸åœ¨windowsä¸­å®ç°å‘¢ï¼Ÿæˆ‘çš„åŠå…¬ç”µè„‘åˆæ˜¯24å°æ—¶å¼€æœºçš„ï¼Œå°‘ç»´æŠ¤ä¸€ä¸ªè®¾å¤‡å¤šé¦™å•Šã€‚ä½†æ˜¯åœ¨å®ç°çš„è¿‡ç¨‹ä¸­å‘ç°pybluezçš„åº“åœ¨windowså¹³å°ä¸Šå¹¶ä¸æ”¯æŒBLEã€‚ã€‚ã€‚ä½†æ˜¯ä¸‡èƒ½çš„GayHubè¯´ï¼špybluezä¸è¡Œæˆ‘è¿™è¿˜æœ‰pysimplebleï¼Œå°½ç®¡æ–‡æ¡£å°‘ï¼Œåˆä¸æ˜¯ä¸èƒ½ç”¨å¯¹å§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x05-è·å–irk&#34;&gt;0x05 è·å–IRK&lt;/h2&gt;

&lt;p&gt;æ—¢ç„¶éšæœºåœ°å€æ˜¯æ ¹æ®IRKæ¥è§£æçš„ï¼Œé‚£é¦–å…ˆå°±è¦è·å–åˆ°ä¸€ä¸ªIRKã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦ä¸€ä¸ªæ”¯æŒBLEçš„è“ç‰™é€‚é…å™¨ï¼ˆæˆ‘ä¸¤å°ç”µè„‘è“ç‰™é€‚é…å™¨å¯èƒ½å› ä¸ºä¸æ”¯æŒBLEé…å¯¹ï¼Œåªèƒ½è·å–åˆ°Linkkeyï¼‰ï¼Œä»¥åŠWin10ç³»ç»Ÿç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;å°†ç”µè„‘ä¸æ‰‹æœºè¿›è¡Œé…å¯¹ï¼Œé…å¯¹å®Œæˆåï¼Œæ‰“å¼€è®¾å¤‡ç®¡ç†å™¨ï¼Œæ‰¾åˆ°iPhoneçš„è“ç‰™LEè®¾å¤‡ï¼Œæ‰“å¼€å±æ€§çª—å£çš„äº‹ä»¶é€‰é¡¹å¡ï¼Œåœ¨ä¿¡æ¯æ è®°å½•è“ç‰™LEè®¾å¤‡çš„è®¾å¤‡å·ï¼ˆå¦‚å›¾5.1ï¼‰&lt;br /&gt;
&lt;img src=&#34;https://pic.sinowrt.cn/blogpics/20220508181736.jpg&#34; alt=&#34;å›¾ 5.1&#34; /&gt;&lt;br /&gt;
ä¸‹è½½&lt;a href=&#34;https://docs.microsoft.com/en-us/sysinternals/downloads/psexec&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;PsTools&lt;/a&gt;è§£å‹,ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€CMDï¼Œcdåˆ°è§£å‹å¥½çš„PsToolsæ ¹ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# 64ä½æ“ä½œç³»ç»Ÿæ‰§è¡Œä»¥ä¸‹å‘½ä»¤
PsExec64.exe -si regedit
# 32ä½æ“ä½œç³»ç»Ÿæ‰§è¡Œä»¥ä¸‹å‘½ä»¤
PsExec.exe -si regedit
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ‰§è¡Œå‘½ä»¤åä¼šæ‰“å¼€æ³¨å†Œè¡¨çª—å£ï¼Œåœ¨å·¦ä¾§æ‰¾åˆ°&lt;code&gt;HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\BTHPORT\Parameters\Keys\&lt;/code&gt;ç›®å½•(å¦‚å›¾ 5.2)&lt;br /&gt;
&lt;img src=&#34;https://pic.sinowrt.cn/blogpics/20220508181400.png&#34; alt=&#34;å›¾ 5.2&#34; /&gt;&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€å±‚ç›®å½•æ˜¯æœ¬æœºè“ç‰™Macåœ°å€ï¼Œåœ¨ç¬¬äºŒå±‚ç›®å½•ä¸­æ‰¾åˆ°è®¾å¤‡ç®¡ç†å™¨ä¸­è®°å½•ä¸‹çš„è®¾å¤‡å·ï¼Œç‚¹å‡»è¯¥ç›®å½•ï¼Œè®°å½•å³ä¾§çª—å£çš„IRKç§˜é’¥ä¸²&lt;/p&gt;

&lt;p&gt;PSï¼šå¦‚æœæœ‰ ESP32 å¼€å‘æ¿ï¼Œå¯ä»¥çƒ§å½•&lt;a href=&#34;https://github.com/fryefryefrye/Decoding-Random-Bluetooth-Address&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Decoding-Random-Bluetooth-Address&lt;/a&gt;é¡¹ç›®çš„&lt;code&gt;get_irk - esp32_irk.ino&lt;/code&gt;ï¼Œå†ä½¿ç”¨æ‰‹æœºè·ŸESP32é…å¯¹ï¼Œåœ¨ä¸²å£ç›‘è§†å™¨ä¸­å³å¯çœ‹åˆ°æ‰“å°å‡ºæ¥çš„IRKã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼Œ&lt;a href=&#34;https://github.com/fryefryefrye/Decoding-Random-Bluetooth-Address&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;Decoding-Random-Bluetooth-Address&lt;/a&gt;è¿™ä¸ªé¡¹ç›®ä¸­çš„nrf_ble_addæ–‡ä»¶å¤¹ä¸­ï¼Œæœ‰Cè¯­å®ç°çš„ç¨‹åºï¼Œå¯ä»¥ç”¨æ¥ç ”ç©¶éšæœºåœ°å€ä¸irkåŒ¹é…çš„å…·ä½“ç®—æ³•ï¼Œæˆ‘ä»…å‚è€ƒäº†ahå‡½æ•°çš„å…·ä½“å®ç°è¿‡ç¨‹ï¼Œå› ä¸ºé¡¹ç›®è·‘èµ·æ¥çš„å‘ç°éšæœºåœ°å€å’Œirkçš„åŒ¹é…ç»“æœä¸å¯¹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x06-ä½ç½®åˆ¤æ–­å®ç°ç¯‡&#34;&gt;0x06 ä½ç½®åˆ¤æ–­å®ç°ç¯‡&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;## éšæœºåœ°å€æ ¡éªŒå™¨
class RandomAddressValidator(object):
    def __init__(self):
        self.irk = &#39;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#39;
        # å°†irkçš„hexæ•°å€¼è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
        self.key = bytearray.fromhex(self.irk)  
        self.MODE = AES.MODE_ECB

    # ahå‡½æ•°
    def ah(self, k, _r):
        aes = AES.new(k, self.MODE)
        encrypted_text = aes.encrypt(_r)
        return encrypted_text.hex()

    def validate(self, random_address):
        random_address = random_address.replace(&#39;:&#39;, &#39;&#39;)
        # paddingç”¨äºå¡«å……prandä½æ•°
        padding = &#39;00000000000000000000000000&#39;
        # prandä¸ºéšæœºåœ°å€çš„é«˜24ä½
        prand = random_address[:6]
        # ç”¨äºæœ€ç»ˆæ ¡éªŒçš„hashä¸ºéšæœºåœ°å€çš„ä½24ä½
        hash = random_address[-6:]
        # å°†å¡«å……åˆ°128ä½çš„prandè½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
        _r = bytearray.fromhex(padding + prand)
        # ahå‡½æ•°ä¼ å…¥irkä»¥åŠå¡«å……åçš„prandå¹¶è¿”å›è¿ç®—ç»“æœ
        ah_res = self.ah(self.key, _r)
        # è¿”å›å¯¹æ¯”ç»“æœ
        return ah_res[-6:] == hash
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ ¡éªŒå™¨æœ‰äº†ï¼Œæ¥ä¸‹æ¥åªéœ€è¦å¾ªç¯æ‰«æBLEä¿¡å·ï¼Œç„¶åå°†æ‰«æåˆ°çš„è“ç‰™åœ°å€è¿›è¡Œä¸€ä¸€æ ¡éªŒï¼Œå³å¯åˆ¤æ–­æˆ‘çš„æ‰‹æœºæœ‰æ²¡æœ‰åœ¨é™„è¿‘&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;pre_is_nearby = False
is_nearby = False
sendNotify_status = &#39;unknow&#39;

while True:
    adapters = simplepyble.Adapter.get_adapters()

    if len(adapters) == 0:
        print(&amp;quot;No adapters found&amp;quot;)

    adapter = adapters[0]

    print(f&amp;quot;Selected adapter: {adapter.identifier()} [{adapter.address()}]&amp;quot;)
    adapter.set_callback_on_scan_start(lambda: print(&amp;quot;Scan started.&amp;quot;))
    adapter.set_callback_on_scan_stop(lambda: print(&amp;quot;Scan complete.&amp;quot;))
    adapter.set_callback_on_scan_found(
        lambda peripheral: print(f&amp;quot;Found {peripheral.identifier()} [{peripheral.address()}]&amp;quot;))

    # Scan for 10 seconds
    adapter.scan_for(10000)

    peripherals = adapter.scan_get_results()

    time.sleep(1)

    pre_is_nearby = is_nearby
    is_nearby = False

    for i, peripheral in enumerate(peripherals):
        validate_res = RandomAddressValidator().validate(peripheral.address())
        print(f&amp;quot;[{peripheral.address()}] is_Matched:{validate_res}&amp;quot;)

        if validate_res:
            is_nearby = True
            break

    now_localtime = time.strftime(&amp;quot;%H:%M:%S&amp;quot;, time.localtime())

    # ä¸Šç­æ—¶é—´
    if &amp;quot;07:00:00&amp;quot; &amp;lt; now_localtime &amp;lt; &amp;quot;08:10:00&amp;quot;:
        if is_nearby and sendNotify_status != &#39;morning&#39;:
            # å‘é€ä¸Šç­æ‰“å¡æé†’
            sendNotify_status = &#39;morning&#39;
    # ä¸‹ç­æ—¶é—´
    elif &amp;quot;16:59:00&amp;quot; &amp;lt; now_localtime &amp;lt; &amp;quot;20:00:00&amp;quot;:
        # æ™šä¸Šä¼šæœ‰æš‚æ—¶ç¦»å¼€ç”µè„‘ï¼Œä½†å¹¶æœªä¸‹ç­çš„æƒ…å†µï¼Œéœ€é‡å¤æé†’
        if pre_is_nearby != is_nearby:
            sendNotify_status = &#39;unknow&#39;

        if not is_nearby and sendNotify_status != &#39;night&#39;:
            # å‘é€ä¸‹ç­æ‰“å¡æé†’
            sendNotify_status = &#39;night&#39;     

    # æ¯30ç§’æ‰«æä¸€æ¬¡
    time.sleep(30ï¼‰
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;0x07-æé†’æ–¹å¼å®ç°ç¯‡&#34;&gt;0x07 æé†’æ–¹å¼å®ç°ç¯‡&lt;/h2&gt;

&lt;p&gt;æˆ‘å®ç°çš„æé†’æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼šé‚®ä»¶æé†’ ä»¥åŠ å…¬ä¼—å·é€šçŸ¥æé†’ã€‚è¿˜æœ‰ä¸€ç§æ‰©å±•çš„æé†’æ–¹å¼ï¼Œæ˜¯åŸºäºIOSå¿«æ·æŒ‡ä»¤çš„è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼Œå½“æ”¶åˆ°é‚®ä»¶æ—¶ï¼Œè‡ªåŠ¨å¼¹å‡ºå¿«æ·æŒ‡ä»¤æé†’ï¼Œè¯¥æ–¹å¼å¯ä»¥å°†å¿«æ·æŒ‡ä»¤è®¾ç½®ä¸ºå½“ç”¨æˆ·æ‰‹åŠ¨è¿è¡Œå¿«æ·æŒ‡ä»¤æ—¶ï¼Œè‡ªåŠ¨è®¿é—®ç¡®è®¤æ‰“å¡çš„å›è°ƒç½‘å€ã€‚&lt;/p&gt;

&lt;p&gt;é‚®ä»¶æé†’çš„å®ç°éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨é‚®ç®±åå°è®¾ç½®ä¸€ä¸‹æˆæƒç ï¼Œå¡«å…¥ä»£ç ä¸­å³å¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# è¿™æ®µä»£ç æ˜¯å¯ä»¥å¼€ç®±å³ç”¨çš„
def send_email(title, content):
    import smtplib
    from email.mime.multipart import MIMEMultipart
    from email.mime.text import MIMEText
    # è®¾ç½®smtp host
    mail_host = &#39;smtp.163.com&#39;
    # è®¾ç½®é‚®ç®±
    mail_user = &#39;XXXXXXXXXX@163.com&#39;

    # è¿™ä¸ªæ˜¯æˆæƒç  ä¸æ˜¯å¯†ç  éœ€è¦å»163è®¾ç½®
    mail_pass = &#39;XXXXXXXXXX&#39;
    sender = &#39;XXXXXXXXXX@163.com&#39;
    # æ”¶ä»¶äººé‚®ç®±
    receivers = [&#39;XXXXXXXXXX@qq.com&#39;]

    # æ„é€ message ï¼ˆé‚®ä»¶å†…å®¹ï¼‰
    message = MIMEText(content, &#39;plain&#39;, &#39;utf-8&#39;)
    message[&#39;Subject&#39;] = title
    message[&#39;From&#39;] = sender
    message[&#39;To&#39;] = receivers[0]

    # smtp = smtplib.SMTP(mail_host, 587)
    try:
        # smtp = smtplib.SMTP_SSL(mail_host, 465)  # å¯ç”¨SSLå‘ä¿¡, ç«¯å£ä¸€èˆ¬æ˜¯465

        smtp = smtplib.SMTP()
        smtp.connect(mail_host)
        smtp.set_debuglevel(1)
        smtp.ehlo()
        # smtp.starttls()
        smtp.ehlo()
        smtp.login(mail_user, mail_pass)
        smtp.sendmail(sender, receivers, message.as_string())
        smtp.quit()
        print(&amp;quot;mail has been send successfully.&amp;quot;)
    except smtplib.SMTPException as e:
        print(e)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å…¬ä¼—å·é€šçŸ¥æé†’ï¼Œéœ€è¦å¼€é€šä¸€ä¸ªæµ‹è¯•å·ï¼ˆå¯ä»¥å®ç°æ¨¡æ¿æ¶ˆæ¯ï¼ˆä¸šåŠ¡é€šçŸ¥ï¼‰å‘é€çš„åŠŸèƒ½çš„æœ€ç®€å•æ–¹å¼ï¼‰ï¼Œå¯ä»¥æ‰“å¼€&lt;a href=&#34;https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;è¿™é‡Œ&lt;/a&gt;æ³¨å†Œï¼Œç„¶åé…ç½®æ¶ˆæ¯æ¨¡æ¿ï¼Œæ¨¡æ¿å†…å®¹ä¸­å­—æ®µä½¿ç”¨&amp;rdquo;{{å­—æ®µå.DATA}}&amp;ldquo;çš„æ ¼å¼è¿›è¡Œé…ç½®ï¼Œé…ç½®å¥½ä¹‹åè®°å½•ä¸‹æ¨¡æ¿idï¼Œåœ¨ä»£ç å±‚é¢è¿˜è¦åšä»¥ä¸‹å·¥ä½œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# access_tokençš„æ•°æ®ç»“æ„
access_token = {&#39;token&#39;: None, &#39;expire_time&#39;: None}

# æ£€æŸ¥access_tokenæ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸåˆ™é‡æ–°è·å–
def check_access_token(access_token_dict):
    current_time = datetime.datetime.now()
    if access_token_dict[&#39;token&#39;] is None or current_time &amp;gt; access_token_dict[&#39;expire_time&#39;]:
        token = get_access_token()
        expire_time = current_time + datetime.timedelta(seconds=7200)
        access_token_dict[&#39;token&#39;] = token
        access_token_dict[&#39;expire_time&#39;] = expire_time
    return access_token_dict

# ç”±äºå‘é€æ¨¡æ¿æ¶ˆæ¯æ—¶éœ€è¦æºå¸¦access_tokenï¼Œtokenæ˜¯æœ‰æ—¶é—´é™åˆ¶çš„ï¼Œæ‰€ä»¥éœ€è¦å®šæœŸåˆ·æ–°token
def get_access_token():
    # appidå’Œsecretå¯ä»¥åœ¨æµ‹è¯•å·åå°çš„â€œæµ‹è¯•å·ä¿¡æ¯â€ä¸­è·å–
    url = &amp;quot;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;amp;appid=xxxxxxxxxx&amp;amp;secret=xxxxxxxxxx&amp;quot;

    payload = {}
    headers = {}

    response = requests.request(&amp;quot;GET&amp;quot;, url, headers=headers, data=payload)
    res = json.loads(response.text)
    print(f&amp;quot;Get access_token successfully!\n[access_token]:{res[&#39;access_token&#39;]}&amp;quot;)

    return res[&#39;access_token&#39;]

# å‘é€æ¨¡æ¿æ¶ˆæ¯çš„æ–¹æ³•ï¼Œ
def send_template_msg(access_token, msg_content, msg_time):
    url = &amp;quot;https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=&amp;quot; + access_token

    payload = json.dumps({
        # æ¥æ”¶è€…openid
        &amp;quot;touser&amp;quot;: &amp;quot;openid&amp;quot;,
        # æ¨¡æ¿id
        &amp;quot;template_id&amp;quot;: &amp;quot;xxxxxxxxxx&amp;quot;,
        # ç‚¹å‡»æ¨¡æ¿æ¶ˆæ¯è·³è½¬çš„url
        &amp;quot;url&amp;quot;: &amp;quot;http://weixin.qq.com/download&amp;quot;,
        &amp;quot;topcolor&amp;quot;: &amp;quot;#FF0000&amp;quot;,
        &amp;quot;data&amp;quot;: {
            &amp;quot;content&amp;quot;: {
                &amp;quot;value&amp;quot;: msg_content,
                &amp;quot;color&amp;quot;: &amp;quot;#173177&amp;quot;
            },
            &amp;quot;time&amp;quot;: {
                &amp;quot;value&amp;quot;: msg_time,
                &amp;quot;color&amp;quot;: &amp;quot;#173177&amp;quot;
            }
        }
    })
    headers = {
        &#39;Content-Type&#39;: &#39;application/json&#39;
    }
    response = requests.request(&amp;quot;POST&amp;quot;, url, headers=headers, data=payload)
    print(response.text)
    return response.text
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¿«æ·æŒ‡ä»¤æé†’è®¾ç½®ï¼š&lt;br /&gt;
é¦–å…ˆéœ€è¦è®¾ç½®IOSçš„é‚®ç®±ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯QQé‚®ç®±ï¼Œéœ€è¦åˆ°QQé‚®ç®±çš„è®¾ç½®ä¸­å¯ç”¨IMAP/SMTPæœåŠ¡ï¼Œç„¶åç”Ÿæˆæˆæƒç ã€‚è·å–åˆ°æˆæƒç ä¹‹åï¼Œåˆ°â€œé‚®ä»¶â€ä¸­æ·»åŠ QQé‚®ç®±è´¦æˆ·ï¼Œç„¶åä¸»æœºåå¡«å†™imap.qq.comï¼Œç”¨æˆ·åä¸ºQQé‚®ç®±ï¼Œå¯†ç ä¸ºæˆæƒç ï¼Œç”±äºæˆ‘æ²¡ä½¿ç”¨åˆ°SMTPæœåŠ¡ï¼Œå°±æ²¡æœ‰è¿›è¡Œé…ç½®ã€‚å…·ä½“çš„é…ç½®è¿‡ç¨‹å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://service.mail.qq.com/cgi-bin/help?subtype=1&amp;amp;&amp;amp;id=28&amp;amp;&amp;amp;no=334#5&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;QQå®˜æ–¹æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¿«æ·æŒ‡ä»¤è®¾ç½®ï¼šæ‰¾åˆ°å¿«æ·æŒ‡ä»¤çš„è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼Œå…·ä½“æ“ä½œå¾ˆç®€å•ï¼Œå°±ä¸å†èµ˜è¿°äº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x08-èŠ±çµ®&#34;&gt;0x08 èŠ±çµ®&lt;/h2&gt;

&lt;p&gt;åœ¨Windowsä¸­ä½¿ç”¨Pythonå®ç°å—é˜»åï¼Œå‘ç°Windows SDKæ˜¯æä¾›BLEçš„å®Œæ•´æ”¯æŒçš„ï¼Œäºæ˜¯åˆè½¬è¿‡å¤´å‡†å¤‡åœ¨windowsä½¿ç”¨C#å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå¾®è½¯è¿˜æä¾›äº†è‹¥å¹²ä¾‹ç¨‹ï¼Œæ¯”å¦‚ï¼š&lt;a href=&#34;https://github.com/microsoft/Windows-universal-samples/tree/dev/Samples/BluetoothLE&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;BluetoothLE&lt;/a&gt;, &lt;a href=&#34;https://github.com/Microsoft/BluetoothLEExplorer&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;BluetoothLEExplorer&lt;/a&gt;æœ‰C#å¼€å‘ç»éªŒçš„æœ‹å‹å¯ä»¥ä¼˜å…ˆè€ƒè™‘C#å®ç°ã€‚å› ä¸ºC#æˆ‘å¤ªä¹…æ²¡æ¥è§¦äº†ï¼Œè¦é‡æ–°ä¸Šæ‰‹å¼€å‘æ‰€èŠ±è´¹çš„æ—¶é—´æˆæœ¬æ˜¯å·¨å¤§çš„ï¼Œå°±è¿˜æ˜¯å°†å·¥ä½œè½¬åˆ°å¯»æ‰¾Win10å…¼å®¹çš„Python BLEåº“äº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Python 3.10.04 ç¯å¢ƒä¸‹ä½¿ç”¨ pip install pybluez çš„è‹¥å¹²æŠ¥é”™</title>
      <link>http://blog.sinowrt.cn/2022/2022-04-30t1807-several-errors-while-installing-pybluez-with-pip-python-version-3.10.04/</link>
      <pubDate>Sat, 30 Apr 2022 18:07:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-04-30t1807-several-errors-while-installing-pybluez-with-pip-python-version-3.10.04/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;å‡†å¤‡åœ¨Win10ä½¿ç”¨pythonåšè“ç‰™åŠŸèƒ½å¼€å‘ï¼Œå®‰è£…äº†æœ€æ–°çš„Python 3.10.04ï¼Œç„¶ååœ¨Pycharmä¸­æ–°å»ºå·¥ç¨‹ï¼ŒæŒ‡å®švenvç¯å¢ƒä¸ºPython 3.10.04ã€‚åœ¨ä½¿ç”¨pipå®‰è£…pybluezåŒ…çš„æ—¶å€™ï¼ŒæŠ¥äº†è‹¥å¹²ä¸ªErrorï¼Œå°±å†™ç¯‡Blogè®°å½•ä¸€ä¸‹ï¼Œç»™å¤§å®¶åšå‚è€ƒã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-æŠ¥é”™åŠè§£å†³è¿‡ç¨‹&#34;&gt;0x01 æŠ¥é”™åŠè§£å†³è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;ç¬¬ä¸€ä¸ªæŠ¥é”™ä¸ºï¼š&lt;code&gt;error in pybluez2 setup command: use_2to3 is invalid.&lt;/code&gt;&lt;br /&gt;
åŸå› ï¼šé«˜ç‰ˆæœ¬çš„&lt;code&gt;setuptools&lt;/code&gt;ä¸­ä¸å†ä½¿ç”¨&lt;code&gt;use_2to3&lt;/code&gt;
è§£å†³æ–¹æ³•ï¼š&lt;code&gt;File &amp;gt; Settings &amp;gt; Project:xxxx &amp;gt; Python Interpreter çš„Packageä¸­&lt;/code&gt; å°† &lt;code&gt;setuptools&lt;/code&gt; ç‰ˆæœ¬é™åˆ°58ä»¥ä¸‹å³å¯&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒä¸ªæŠ¥é”™ä¸ºï¼š&lt;code&gt;LINK : fatal error LNK1181: cannot open input file &#39;Irprops.lib&#39;&lt;/code&gt;
åŸå› ï¼šWindows Kitä¸­åˆ é™¤äº†irprops.libï¼Œé“¾æ¥åˆ° irprops.lib çš„åº”ç”¨å¯ç›´æ¥æ”¹ä¸ºé“¾æ¥åˆ° bthprops.lib
è§£å†³æ–¹æ³•ï¼š
æ ¹æ®ç¼–è¯‘å‘½ä»¤ï¼Œæ‰¾åˆ°Windows Kitçš„ä½ç½®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt; C:\Program Files (x86)\Microsoft Visual Studio\2017\BuildTools\VC\Tools\MSVC\14.16.27023\bin\HostX86\x64\link.exe /nologo /INCREMENTAL:NO /LTCG /
DLL /MANIFEST:EMBED,ID=2 /MANIFESTUAC:NO /LIBPATH:E:\mcp\WorkPal\venv\libs /LIBPATH:D:\Program Files\Python\Python_310\libs /LIBPATH:D:\Program Fil
es\Python\Python_310 /LIBPATH:E:\mcp\WorkPal\venv\PCbuild\amd64 /LIBPATH:C:\Program Files (x86)\Microsoft Visual Studio\2017\BuildTools\VC\Tools\MS
VC\14.16.27023\lib\x64 /LIBPATH:C:\Program Files (x86)\Windows Kits\NETFXSDK\4.6.1\lib\um\x64 /LIBPATH:C:\Program Files (x86)\Windows Kits\10\lib\1
0.0.22000.0\ucrt\x64 /LIBPATH:C:\Program Files (x86)\Windows Kits\10\lib\10.0.22000.0\um\x64 WS2_32.lib Irprops.lib /EXPORT:PyInit__msbt build\temp
.win-amd64-3.10\Release\msbt\_msbt.obj /OUT:build\lib.win-amd64-3.10\bluetooth\_msbt.cp310-win_amd64.pyd /IMPLIB:build\temp.win-amd64-3.10\Release\
msbt\_msbt.cp310-win_amd64.lib
  LINK : fatal error LNK1181: cannot open input file &#39;Irprops.lib&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ ¹æ®å‘½ä»¤ï¼Œæˆ‘çš„libç›®å½•ä¸º&lt;code&gt;C:\Program Files (x86)\Windows Kits\10\lib\10.0.22000.0\um\x64&lt;/code&gt;&lt;br /&gt;
ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€CMDï¼Œcdåˆ°è¯¥ç›®å½•ï¼Œç„¶åä½¿ç”¨&lt;code&gt;mklink IRPROPS.LIB bthprops.lib&lt;/code&gt;åˆ›å»ºç¬¦å·é“¾æ¥&lt;br /&gt;
ç„¶åé‡æ–°pip install pybluezå³å¯&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>pip install WinError 10061è§£å†³æ–¹æ³•</title>
      <link>http://blog.sinowrt.cn/2022/2022-04-26t2103-how-to-solve-pycharm-pip-install-winerror-10061/</link>
      <pubDate>Tue, 26 Apr 2022 21:03:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-04-26t2103-how-to-solve-pycharm-pip-install-winerror-10061/</guid>
      <description>

&lt;h2 id=&#34;0x00-è§£å†³è¿‡ç¨‹&#34;&gt;0x00 è§£å†³è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;ä»Šæ™šåœ¨pycharmçš„terminalä¸­æ›´æ–°pipç‰ˆæœ¬çš„æ—¶å€™ï¼Œé‡åˆ°ä¸‹é¢çš„æŠ¥é”™ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by &#39;ProxyError(&#39;Cannot connect to proxy.&#39;, NewConnectionError(&#39;&amp;lt;pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x0000011051C02790&amp;gt;: Failed to establish a new connection: [WinError 10061] ç”±äºç›®æ ‡è®¡ç®—æœºç§¯ææ‹’ç»ï¼Œæ— æ³•è¿æ¥ã€‚&#39;))&#39;: /pypi/simple/pip/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ— è®ºä¸‹è½½ä»€ä¹ˆåŒ…éƒ½æ˜¯æŠ¥10061çš„Errorã€‚&lt;/p&gt;

&lt;p&gt;æŸ¥äº†ç½‘ä¸Šå…¨æ˜¯å…³ç³»ç»Ÿä»£ç†å‘€ï¼Œå…³æµè§ˆå™¨ä»£ç†å‘€ï¼Œå…¨è¯•äº†ä¸€ééƒ½æ²¡ç”¨ï¼Œpycharmçš„ä»£ç†ä¹Ÿæ‰¾äº†ä¸€ééƒ½æ²¡å‘ç°é—®é¢˜ï¼Œé‡å¯pycharmé‡å¯ç”µè„‘éƒ½æ²¡ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;åé¢è¿˜æ˜¯ä¿®æ”¹æ³¨å†Œè¡¨è§£å†³äº†ï¼Œä¿®æ”¹è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;br /&gt;
&lt;code&gt;Win+R&lt;/code&gt;é”®ï¼Œè¾“å…¥regeditå›è½¦æ‰“å¼€æ³¨å†Œè¡¨ï¼Œæ‰“å¼€&lt;code&gt;è®¡ç®—æœº\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings&lt;/code&gt;ï¼Œæ‰¾åˆ°&lt;code&gt;ProxyEnable&lt;/code&gt;è¡¨é¡¹ï¼Œä¿®æ”¹æ•°å€¼æ•°æ®ä¸º0ï¼Œç‚¹å‡»ç¡®å®šå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;æ— éœ€é‡å¯ï¼Œç›´æ¥æ‰“å¼€pycharmçš„terminalï¼Œå¯ä»¥æ­£å¸¸æ›´æ–°pipäº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æ ‘è“æ´¾ ubuntu server 20.04å¯ç”¨è“ç‰™åŠŸèƒ½</title>
      <link>http://blog.sinowrt.cn/2022/2022-04-25t1936-raspberry-pi-how-to-enable-bluetooth-on-ubuntu-server-20.04/</link>
      <pubDate>Mon, 25 Apr 2022 19:36:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-04-25t1936-raspberry-pi-how-to-enable-bluetooth-on-ubuntu-server-20.04/</guid>
      <description>

&lt;h2 id=&#34;0x00-è§£å†³è¿‡ç¨‹&#34;&gt;0x00 è§£å†³è¿‡ç¨‹&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#å®‰è£…bluetoothctl
sudo apt-get install pi-bluetooth

#é…ç½®è®¾å¤‡ï¼Œå¦‚æœé‡åˆ°é…ç½®è¶…æ—¶ï¼Œé‡è¯•å³å¯ï¼Œè¾“å‡ºDevice setup completeè¯´æ˜é…ç½®æˆåŠŸ
sudo hciattach /dev/ttyAMA0 bcm43xx 921600 nowflow -

#è¿è¡Œbluetoothctl
sudo bluetoothctl

#å¯åŠ¨è“ç‰™
power on

#å¯è¢«å‘ç°
discoverable on

#æœç´¢è®¾å¤‡
scan on

#é…å¯¹
pair è®¾å¤‡åœ°å€

#è¿æ¥
connect è®¾å¤‡åœ°å€

&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>åœ¨ubuntu20.04ä¸­ç¼–è¯‘OpenJDK7</title>
      <link>http://blog.sinowrt.cn/2022/2022-04-17t2030-how-to-compile-openjdk7-on-ubuntu20.04/</link>
      <pubDate>Sun, 17 Apr 2022 20:30:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-04-17t2030-how-to-compile-openjdk7-on-ubuntu20.04/</guid>
      <description>

&lt;h2 id=&#34;0x00-ç¼–è¯‘ç¯å¢ƒ&#34;&gt;0x00 ç¼–è¯‘ç¯å¢ƒ&lt;/h2&gt;

&lt;p&gt;ç³»ç»Ÿï¼šubuntu20.04&lt;br /&gt;
ç›®æ ‡JDKï¼šopenjdk7&lt;br /&gt;
Bootstrap JDKï¼šJava SE Development Kit 7u4&lt;br /&gt;
Antï¼šapache-ant-1.9.16&lt;br /&gt;
Freetypeï¼šfreetype-2.3.0&lt;br /&gt;
gcc/g++ç‰ˆæœ¬ï¼šgcc-4.9/g++-4.9&lt;/p&gt;

&lt;h2 id=&#34;0x01-ç¯å¢ƒé…ç½®&#34;&gt;0x01 ç¯å¢ƒé…ç½®&lt;/h2&gt;

&lt;p&gt;å®‰è£…ä¾èµ–åŒ…&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo apt-get install build-essential gawk m4 libasound2-dev libcups2-dev libxrender-dev xorg-dev xutils-dev binutils libmotif-dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®‰è£…Freetype&lt;br /&gt;
å°†ä¸‹è½½çš„è½¯ä»¶åŒ…è§£å‹å‡ºæ¥ï¼Œè¿›å…¥æ ¹ç›®å½•&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;./configure
sudo make
sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥å°†ä»¥ä¸‹ä»£ç ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨sourceå‘½ä»¤ï¼Œsourceè¯¥æ–‡ä»¶ç¯å¢ƒå˜é‡å³è®¾ç½®æˆåŠŸï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#è¯­è¨€é€‰é¡¹ï¼Œè¿™ä¸ªå¿…é¡»è®¾ç½®ï¼Œå¦åˆ™ç¼–è¯‘å¥½åä¼šå‡ºç°ä¸€ä¸ªHashTableçš„NPEé”™
export LANG=C
#Bootstrap JDKçš„å®‰è£…è·¯å¾„ã€‚å¿…é¡»è®¾ç½®
export ALT_BOOTDIR=/home/sinowrt/Documents/jre1.7.0_04
#å…è®¸è‡ªåŠ¨ä¸‹è½½ä¾èµ–
export ALLOW_DOWNLOADS=true
#å¹¶è¡Œç¼–è¯‘çš„çº¿ç¨‹æ•°ï¼Œè®¾ç½®ä¸ºå’ŒCPUå†…æ ¸æ•°é‡ä¸€è‡´å³å¯
export HOTSPOT_BUILD_JOBS=4
export ALT_PARALLEL_COMPILE_JOBS=4
#æ¯”è¾ƒæœ¬æ¬¡buildå‡ºæ¥çš„æ˜ åƒä¸å…ˆå‰ç‰ˆæœ¬çš„å·®å¼‚ã€‚è¿™å¯¹æˆ‘ä»¬æ¥è¯´æ²¡æœ‰æ„ä¹‰ï¼Œ
#å¿…é¡»è®¾ç½®ä¸ºfalseï¼Œå¦åˆ™sanityæ£€æŸ¥ä¼šæŠ¥ç¼ºå°‘å…ˆå‰ç‰ˆæœ¬JDKçš„æ˜ åƒçš„é”™è¯¯æç¤ºã€‚
#å¦‚æœå·²ç»è®¾ç½®devæˆ–è€…DEV_ONLY=trueï¼Œè¿™ä¸ªä¸æ˜¾å¼è®¾ç½®ä¹Ÿè¡Œ
export SKIP_COMPARE_IMAGES=true
#ä½¿ç”¨é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼Œä¸åŠ è¿™ä¸ªç¼–è¯‘ä¼šæ›´æ…¢ä¸€äº›
export USE_PRECOMPILED_HEADER=true
#è¦ç¼–è¯‘çš„å†…å®¹
export BUILD_LANGTOOLS=true
#export BUILD_JAXP=false
#export BUILD_JAXWS=false
#export BUILD_CORBA=false
export BUILD_HOTSPOT=true
export BUILD_JDK=true
#è¦ç¼–è¯‘çš„ç‰ˆæœ¬
#export SKIP_DEBUG_BUILD=false
#export SKIP_FASTDEBUG_BUILD=true
#export DEBUG_NAME=debug
#æŠŠå®ƒè®¾ç½®ä¸ºfalseå¯ä»¥é¿å¼€javawså’Œæµè§ˆå™¨Javaæ’ä»¶ä¹‹ç±»çš„éƒ¨åˆ†çš„build
BUILD_DEPLOY=false
#æŠŠå®ƒè®¾ç½®ä¸ºfalseå°±ä¸ä¼šbuildå‡ºå®‰è£…åŒ…ã€‚å› ä¸ºå®‰è£…åŒ…é‡Œæœ‰äº›å¥‡æ€ªçš„ä¾èµ–ï¼Œ
#ä½†å³ä¾¿ä¸buildå‡ºå®ƒä¹Ÿå·²ç»èƒ½å¾—åˆ°å®Œæ•´çš„JDKæ˜ åƒï¼Œæ‰€ä»¥è¿˜æ˜¯åˆ«buildå®ƒå¥½äº†
BUILD_INSTALL=false
#è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡å¿…é¡»å»æ‰ï¼Œä¸ç„¶ä¼šæœ‰å¾ˆè¯¡å¼‚çš„äº‹æƒ…å‘ç”Ÿï¼ˆæˆ‘æ²¡æœ‰å…·ä½“æŸ¥è¿‡è¿™äº›&amp;quot;è¯¡å¼‚çš„
#äº‹æƒ…&amp;quot;ï¼ŒMakefileè„šæœ¬æ£€æŸ¥åˆ°æœ‰è¿™2ä¸ªå˜é‡å°±ä¼šæç¤ºè­¦å‘Šï¼‰
unset JAVA_HOME
unset CLASSPATH

# ==============ã€ä»¥ä¸‹æ˜¯æˆ‘çš„ä¸ªæ€§åŒ–ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥æŒ‰éœ€è®¾ç½®ã€‘====================
#è®¾ç½®freetypeè·¯å¾„
export ALT_FREETYPE_HEADERS_PATH=/usr/local/include
export ALT_FREETYPE_LIB_PATH=/usr/local/lib
#è®¾ç½®Antè·¯å¾„
export PATH=/home/sinowrt/Documents/apache-ant-1.9.16/bin:$PATH
#ç¼–è¯‘ç»“æœæ‰€å­˜æ”¾çš„è·¯å¾„
export ALT_OUTPUTDIR=/home/sinowrt/Documents/jdk7u-dev/build
export ANT_HOME=/home/sinowrt/Documents/apache-ant-1.9.16
#å–æ¶ˆHotspotç³»ç»Ÿæ”¯æŒæ£€æŸ¥
export DISABLE_HOTSPOT_OS_VERSION_CHECK=false
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;0x02-ç¼–è¯‘jdk&#34;&gt;0x02 ç¼–è¯‘JDK&lt;/h2&gt;

&lt;p&gt;å¯ä»¥ä½¿ç”¨make sanityå‘½ä»¤æ£€æŸ¥å‰é¢æ‰€åšçš„è®¾ç½®æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ˜¾ç¤ºâ€œSanity check passedâ€å³è¯´æ˜æ£€æŸ¥è¿‡ç¨‹é€šè¿‡äº†&lt;br /&gt;
ç„¶åä½¿ç”¨makeå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œä½†æ˜¯é”™äº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æŠ¥é”™ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;g++ -DLINUX -D_GNU_SOURCE -DAMD64 -DPRODUCT -I. -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/prims -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/cpu/x86/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os_cpu/linux_x86/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/posix/vm -I../generated -DHOTSPOT_RELEASE_VERSION=&amp;quot;\&amp;quot;24.80-b07\&amp;quot;&amp;quot; -DHOTSPOT_BUILD_TARGET=&amp;quot;\&amp;quot;product\&amp;quot;&amp;quot; -DHOTSPOT_BUILD_USER=&amp;quot;\&amp;quot;sinowrt\&amp;quot;&amp;quot; -DHOTSPOT_LIB_ARCH=\&amp;quot;amd64\&amp;quot; -DHOTSPOT_VM_DISTRO=&amp;quot;\&amp;quot;OpenJDK\&amp;quot;&amp;quot; -DTARGET_OS_FAMILY_linux -DTARGET_ARCH_x86 -DTARGET_ARCH_MODEL_x86_64 -DTARGET_OS_ARCH_linux_x86 -DTARGET_OS_ARCH_MODEL_linux_x86_64 -DTARGET_COMPILER_gcc -DCOMPILER2 -DCOMPILER1 -fPIC -fno-rtti -fno-exceptions -D_REENTRANT -fcheck-new -fvisibility=hidden -m64 -pipe -O3 -fno-strict-aliasing -g -DVM_LITTLE_ENDIAN -D_LP64=1 -fno-omit-frame-pointer -DINCLUDE_TRACE=1 -Werror -Wpointer-arith -Wsign-compare    -c -fpch-deps -MMD -MP -MF ../generated/dependencies/precompiled.hpp.gch.d -x c++-header /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp -o precompiled.hpp.gch 
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/sharedHeap.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.hpp:34,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/gc_implementation/shared/markSweep.inline.hpp:32,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/oop.inline.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classFileParser.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classLoader.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciEnv.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciUtilities.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciNullObject.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciConstant.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:36:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/generation.hpp:422:17: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  422 |         warning(&amp;quot;time warp: &amp;quot;INT64_FORMAT&amp;quot; to &amp;quot;INT64_FORMAT, _time_of_last_gc, now);
      |                 ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/generation.hpp:422:42: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  422 |         warning(&amp;quot;time warp: &amp;quot;INT64_FORMAT&amp;quot; to &amp;quot;INT64_FORMAT, _time_of_last_gc, now);
      |                                          ^
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/gc_interface/collectedHeap.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/oop.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classFileParser.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classLoader.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciEnv.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciUtilities.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciNullObject.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciConstant.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:36:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hpp:97:25: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   97 |     gclog_or_tty-&amp;gt;print(&amp;quot;TLAB: %s thread: &amp;quot;INTPTR_FORMAT&amp;quot; [id: %2d]&amp;quot;
      |                         ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hpp:98:25: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   98 |                         &amp;quot; obj: &amp;quot;SIZE_FORMAT
      |                         ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hpp:99:25: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   99 |                         &amp;quot; free: &amp;quot;SIZE_FORMAT
      |                         ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/threadLocalAllocBuffer.inline.hppğŸ’¯25: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  100 |                         &amp;quot; waste: &amp;quot;SIZE_FORMAT&amp;quot;\n&amp;quot;,
      |                         ^
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/space.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/space.inline.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/gc_implementation/shared/cSpaceCounters.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/defNewGeneration.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/services/memoryPool.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/services/lowMemoryDetector.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/gc_interface/collectedHeap.inline.hpp:36,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/oop.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classFileParser.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classLoader.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciEnv.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciUtilities.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciNullObject.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciConstant.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:36:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:156:20: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  156 |            err_msg(&amp;quot;Attempt to access p = &amp;quot;PTR_FORMAT&amp;quot; out of bounds of &amp;quot;
      |                    ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:157:20: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  157 |                    &amp;quot; card marking array&#39;s _whole_heap = [&amp;quot;PTR_FORMAT&amp;quot;,&amp;quot;PTR_FORMAT&amp;quot;)&amp;quot;,
      |                    ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:157:69: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  157 |                    &amp;quot; card marking array&#39;s _whole_heap = [&amp;quot;PTR_FORMAT&amp;quot;,&amp;quot;PTR_FORMAT&amp;quot;)&amp;quot;,
      |                                                                     ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:432:20: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  432 |            err_msg(&amp;quot;Returning result = &amp;quot;PTR_FORMAT&amp;quot; out of bounds of &amp;quot;
      |                    ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:433:20: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  433 |                    &amp;quot; card marking array&#39;s _whole_heap = [&amp;quot;PTR_FORMAT&amp;quot;,&amp;quot;PTR_FORMAT&amp;quot;)&amp;quot;,
      |                    ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:433:69: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  433 |                    &amp;quot; card marking array&#39;s _whole_heap = [&amp;quot;PTR_FORMAT&amp;quot;,&amp;quot;PTR_FORMAT&amp;quot;)&amp;quot;,
      |                                                                     ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:441:20: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  441 |            err_msg(&amp;quot;Attempt to access p = &amp;quot;PTR_FORMAT&amp;quot; out of bounds of &amp;quot;
      |                    ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:442:20: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  442 |                    &amp;quot; card marking array&#39;s _whole_heap = [&amp;quot;PTR_FORMAT&amp;quot;,&amp;quot;PTR_FORMAT&amp;quot;)&amp;quot;,
      |                    ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/cardTableModRefBS.hpp:442:69: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
  442 |                    &amp;quot; card marking array&#39;s _whole_heap = [&amp;quot;PTR_FORMAT&amp;quot;,&amp;quot;PTR_FORMAT&amp;quot;)&amp;quot;,
      |                                                                     ^
In file included from ../generated/tracefiles/traceEventClasses.hpp:18,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/tracing.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/opto/compile.hpp:44,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/opto/node.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/opto/addnode.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:259:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/traceStream.hpp:44:15: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   44 |     _st.print(&amp;quot;%s = &amp;quot;UINT32_FORMAT, label, val);
      |               ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/traceStream.hpp:48:15: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   48 |     _st.print(&amp;quot;%s = &amp;quot;UINT32_FORMAT, label, val);
      |               ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/traceStream.hpp:52:15: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   52 |     _st.print(&amp;quot;%s = &amp;quot;INT32_FORMAT, label, val);
      |               ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/traceStream.hpp:56:15: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   56 |     _st.print(&amp;quot;%s = &amp;quot;UINT32_FORMAT, label, val);
      |               ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/traceStream.hpp:60:15: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   60 |     _st.print(&amp;quot;%s = &amp;quot;INT32_FORMAT, label, val);
      |               ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/traceStream.hpp:64:15: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   64 |     _st.print(&amp;quot;%s = &amp;quot;UINT64_FORMAT, label, val);
      |               ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/trace/traceStream.hpp:68:15: error: invalid suffix on literal; C++11 requires a space between literal and string macro [-Werror=literal-suffix]
   68 |     _st.print(&amp;quot;%s = &amp;quot;INT64_FORMAT, label, val);
      |               ^
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:29:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/relocInfo.hpp:374:27: error: friend declaration of &#39;relocInfo prefix_relocInfo(int)&#39; specifies default arguments and isn&#39;t a definition [-fpermissive]
  374 |   inline friend relocInfo prefix_relocInfo(int datalen = 0);
      |                           ^~~~~~~~~~~~~~~~
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:29:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/relocInfo.hpp:469:18: error: friend declaration of &#39;relocInfo prefix_relocInfo(int)&#39; specifies default arguments and isn&#39;t the only declaration [-fpermissive]
  469 | inline relocInfo prefix_relocInfo(int datalen) {
      |                  ^~~~~~~~~~~~~~~~
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:29:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/relocInfo.hpp:374:27: note: previous declaration of &#39;relocInfo prefix_relocInfo(int)&#39;
  374 |   inline friend relocInfo prefix_relocInfo(int datalen = 0);
      |                           ^~~~~~~~~~~~~~~~
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/compiler/disassembler.hpp:31,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:30:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/os_linux.inline.hpp: In static member function &#39;static dirent* os::readdir(DIR*, dirent*)&#39;:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/os_linux.inline.hpp:154:18: error: &#39;int readdir_r(DIR*, dirent*, dirent**)&#39; is deprecated [-Werror=deprecated-declarations]
  154 |   if((status = ::readdir_r(dirp, dbuf, &amp;amp;p)) != 0) {
      |                  ^~~~~~~~~
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/jvm_linux.h:44,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/prims/jvm.h:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/utilities/debug.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/globals.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/allocation.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/iterator.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/genOopClosures.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/klass.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/handles.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/oopRecorder.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:29:
/usr/include/dirent.h:183:12: note: declared here
  183 | extern int readdir_r (DIR *__restrict __dirp,
      |            ^~~~~~~~~
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/compiler/disassembler.hpp:31,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:30:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/os_linux.inline.hpp:154:42: error: &#39;int readdir_r(DIR*, dirent*, dirent**)&#39; is deprecated [-Werror=deprecated-declarations]
  154 |   if((status = ::readdir_r(dirp, dbuf, &amp;amp;p)) != 0) {
      |                                          ^
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/jvm_linux.h:44,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/prims/jvm.h:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/utilities/debug.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/globals.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/allocation.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/iterator.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/genOopClosures.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/klass.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/handles.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/oopRecorder.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:29:
/usr/include/dirent.h:183:12: note: declared here
  183 | extern int readdir_r (DIR *__restrict __dirp,
      |            ^~~~~~~~~
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/compiler/disassembler.hpp:31,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:30:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/os_linux.inline.hpp:154:42: error: &#39;int readdir_r(DIR*, dirent*, dirent**)&#39; is deprecated [-Werror=deprecated-declarations]
  154 |   if((status = ::readdir_r(dirp, dbuf, &amp;amp;p)) != 0) {
      |                                          ^
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/jvm_linux.h:44,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/prims/jvm.h:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/utilities/debug.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/globals.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/allocation.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/iterator.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/genOopClosures.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/klass.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/handles.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/oopRecorder.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:29:
/usr/include/dirent.h:183:12: note: declared here
  183 | extern int readdir_r (DIR *__restrict __dirp,
      |            ^~~~~~~~~
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/constantPoolOop.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/methodOop.hpp:33,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/frame.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/prims/jvmtiExport.hpp:33,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/runtime/thread.hpp:32,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/thread_linux.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/memory/resourceArea.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classFileParser.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/classLoader.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciEnv.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciUtilities.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciNullObject.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciConstant.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:36:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/cpCacheOop.hpp: At global scope:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:42: error: left operand of shift expression &#39;(-1 &amp;lt;&amp;lt; 28)&#39; is negative [-fpermissive]
  189 |     option_bits_mask           = ~(((-1) &amp;lt;&amp;lt; tos_state_shift) | (field_index_mask | parameter_size_mask))
      |                                    ~~~~~~^~~~~~~~~~~~~~~~~~~
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:104: error: enumerator value for &#39;option_bits_mask&#39; is not an integer constant
  189 |     option_bits_mask           = ~(((-1) &amp;lt;&amp;lt; tos_state_shift) | (field_index_mask | parameter_size_mask))
      |                                                                                                        ^
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciEnv.hpp:32,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciUtilities.hpp:28,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciNullObject.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/ci/ciConstant.hpp:29,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:36:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/dependencies.hpp:169:59: error: left operand of shift expression &#39;(-1 &amp;lt;&amp;lt; 1)&#39; is negative [-fpermissive]
  169 |     all_types           = ((1 &amp;lt;&amp;lt; TYPE_LIMIT) - 1) &amp;amp; ((-1) &amp;lt;&amp;lt; FIRST_TYPE),
      |                                                     ~~~~~~^~~~~~~~~~~~~~
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/code/dependencies.hpp:169:72: error: enumerator value for &#39;all_types&#39; is not an integer constant
  169 |     all_types           = ((1 &amp;lt;&amp;lt; TYPE_LIMIT) - 1) &amp;amp; ((-1) &amp;lt;&amp;lt; FIRST_TYPE),
      |                                                                        ^
cc1plus: all warnings being treated as errors
make[6]: *** [/home/sinowrt/Documents/jdk7u-dev/hotspot/make/linux/makefiles/vm.make:296: precompiled.hpp.gch] Error 1
make[6]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/build/hotspot/outputdir/linux_amd64_compiler2/product&#39;
make[5]: *** [/home/sinowrt/Documents/jdk7u-dev/hotspot/make/linux/makefiles/top.make:119: the_vm] Error 2
make[5]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/build/hotspot/outputdir/linux_amd64_compiler2/product&#39;
make[4]: *** [/home/sinowrt/Documents/jdk7u-dev/hotspot/make/linux/Makefile:290: product] Error 2
make[4]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/build/hotspot/outputdir&#39;
make[3]: *** [Makefile:192: generic_build2] Error 2
make[3]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/hotspot/make&#39;
make[2]: *** [Makefile:151: product] Error 2
make[2]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/hotspot/make&#39;
make[1]: *** [make/hotspot-rules.gmk:114: hotspot-build] Error 2
make[1]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev&#39;
make: *** [Makefile:251: build_product_image] Error 2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºå®‰è£…ä¾èµ–åŒ…æ—¶ï¼Œé»˜è®¤å®‰è£…äº†é«˜ç‰ˆæœ¬çš„gccå’Œg++ï¼Œå¯ä½¿ç”¨&lt;code&gt;gcc -v&lt;/code&gt;æˆ–&lt;code&gt;g++ -v&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼Œéœ€è¦å®‰è£…ä½ç‰ˆæœ¬çš„gcc/g++&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sinowrt@ubuntu:~/Documents/jdk7u-dev$ gcc -v
#çœç•¥è‹¥å¹²è¡Œ...
gcc version 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)

sinowrt@ubuntu:~/Documents/jdk7u-dev$ g++ -v      
#çœç•¥è‹¥å¹²è¡Œ...
gcc version 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æˆ‘é€‰æ‹©å®‰è£…4.9ç‰ˆæœ¬çš„gccä¸g++&lt;br /&gt;
è€Œubuntu20.04ä¸­&lt;code&gt;sudo apt-get install gcc-4.9&lt;/code&gt;ä¼šæç¤ºæ‰¾ä¸åˆ°å®‰è£…åŒ…ï¼Œéœ€è¦æ·»åŠ ä½ç‰ˆæœ¬çš„æºï¼Œè¿™é‡Œæˆ‘æ·»åŠ çš„æ˜¯ubuntu16çš„aliyunæº&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;sudo vi /etc/apt/source.list

#åœ¨æ–‡ä»¶æœ€åé¢æ·»åŠ æºä¿¡æ¯,`:wq`ä¿å­˜é€€å‡º
#æº===========================ã€Startã€‘=============================
deb http://mirrors.aliyun.com/ubuntu/ xenial main
deb-src http://mirrors.aliyun.com/ubuntu/ xenial main

deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main

deb http://mirrors.aliyun.com/ubuntu/ xenial universe
deb-src http://mirrors.aliyun.com/ubuntu/ xenial universe
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates universe

deb http://mirrors.aliyun.com/ubuntu/ xenial-security main
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main
deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security universe
#æº===========================ã€E n dã€‘=============================

#æ›´æ–°æº
sudo apt-get update
#å®‰è£…gcc-4.9 g++-4.9
sudo apt-get install gcc-4.9 g++-4.9

sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 40
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 50
sudo update-alternatives --config gcc

#sinowrt@ubuntu:~/Documents/jdk7u-dev$ sudo update-alternatives --config gcc
#There are 2 choices for the alternative gcc (providing /usr/bin/gcc)
#
#  Selection    Path              Priority   Status
#------------------------------------------------------------
#* 0            /usr/bin/gcc-9     50        auto mode
#  1            /usr/bin/gcc-4.9   40        manual mode
#  2            /usr/bin/gcc-9     50        manual mode
#Press &amp;lt;enter&amp;gt; to keep the current choice[*], or type selection number: 

#æ ¹æ®æç¤ºï¼Œè¾“å…¥æ•°å­—1ï¼Œé€‰æ‹©å½“å‰ä½¿ç”¨çš„gccä¸ºgcc-4.9
#g++çš„é…ç½®ä¹Ÿä¸€æ ·ï¼Œæ­¤å¤„ç•¥
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åˆ‡æ¢åˆ°ä½ç‰ˆæœ¬çš„gccå’Œg++åï¼Œmake cleané‡æ–°makeï¼Œè™½ç„¶è¿˜æ˜¯ä¼šæŠ¥errorï¼Œä½†æ˜¯åªæ˜¯warningè¾“å‡ºä¸ºerrorï¼Œå¦‚ä¸‹é¢è¾“å‡ºæ‰€ç¤º&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;g++ -DLINUX -D_GNU_SOURCE -DAMD64 -DPRODUCT -I. -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/prims -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/cpu/x86/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os_cpu/linux_x86/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm -I/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/posix/vm -I../generated -DHOTSPOT_RELEASE_VERSION=&amp;quot;\&amp;quot;24.80-b07\&amp;quot;&amp;quot; -DHOTSPOT_BUILD_TARGET=&amp;quot;\&amp;quot;product\&amp;quot;&amp;quot; -DHOTSPOT_BUILD_USER=&amp;quot;\&amp;quot;sinowrt\&amp;quot;&amp;quot; -DHOTSPOT_LIB_ARCH=\&amp;quot;amd64\&amp;quot; -DHOTSPOT_VM_DISTRO=&amp;quot;\&amp;quot;OpenJDK\&amp;quot;&amp;quot; -DTARGET_OS_FAMILY_linux -DTARGET_ARCH_x86 -DTARGET_ARCH_MODEL_x86_64 -DTARGET_OS_ARCH_linux_x86 -DTARGET_OS_ARCH_MODEL_linux_x86_64 -DTARGET_COMPILER_gcc -DCOMPILER2 -DCOMPILER1 -fPIC -fno-rtti -fno-exceptions -D_REENTRANT -fcheck-new -fvisibility=hidden -m64 -pipe -O3 -fno-strict-aliasing -g -DVM_LITTLE_ENDIAN -D_LP64=1 -fno-omit-frame-pointer -DINCLUDE_TRACE=1 -Werror -Wpointer-arith -Wsign-compare    -c -fpch-deps -MMD -MP -MF ../generated/dependencies/precompiled.hpp.gch.d -x c++-header /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp -o precompiled.hpp.gch 
In file included from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/compiler/disassembler.hpp:31:0,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/asm/assembler.inline.hpp:30,
                 from /home/sinowrt/Documents/jdk7u-dev/hotspot/src/share/vm/precompiled/precompiled.hpp:30:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/os_linux.inline.hpp: In static member function &#39;static dirent* os::readdir(DIR*, dirent*)&#39;:
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/os_linux.inline.hpp:154:18: error: &#39;int readdir_r(DIR*, dirent*, dirent**)&#39; is deprecated (declared at /usr/include/dirent.h:183) [-Werror=deprecated-declarations]
   if((status = ::readdir_r(dirp, dbuf, &amp;amp;p)) != 0) {
                  ^
/home/sinowrt/Documents/jdk7u-dev/hotspot/src/os/linux/vm/os_linux.inline.hpp:154:42: error: &#39;int readdir_r(DIR*, dirent*, dirent**)&#39; is deprecated (declared at /usr/include/dirent.h:183) [-Werror=deprecated-declarations]
   if((status = ::readdir_r(dirp, dbuf, &amp;amp;p)) != 0) {
                                          ^
cc1plus: all warnings being treated as errors
make[6]: *** [/home/sinowrt/Documents/jdk7u-dev/hotspot/make/linux/makefiles/vm.make:296: precompiled.hpp.gch] Error 1
make[6]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/build/hotspot/outputdir/linux_amd64_compiler2/product&#39;
make[5]: *** [/home/sinowrt/Documents/jdk7u-dev/hotspot/make/linux/makefiles/top.make:119: the_vm] Error 2
make[5]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/build/hotspot/outputdir/linux_amd64_compiler2/product&#39;
make[4]: *** [/home/sinowrt/Documents/jdk7u-dev/hotspot/make/linux/Makefile:290: product] Error 2
make[4]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/build/hotspot/outputdir&#39;
make[3]: *** [Makefile:192: generic_build2] Error 2
make[3]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/hotspot/make&#39;
make[2]: *** [Makefile:151: product] Error 2
make[2]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev/hotspot/make&#39;
make[1]: *** [make/hotspot-rules.gmk:114: hotspot-build] Error 2
make[1]: Leaving directory &#39;/home/sinowrt/Documents/jdk7u-dev&#39;
make: *** [Makefile:251: build_product_image] Error 2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‡ºç°è¿™äº›é”™è¯¯æ˜¯å› ä¸ºç¼–è¯‘çš„æ—¶å€™ï¼Œæ·»åŠ äº†-Werrorå‚æ•°ï¼Œåªè¦å°†-Werrorå‚æ•°å»æ‰å³å¯&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;vi hotspot/make/linux/makefiles/gcc.make
#æ‰¾åˆ°WARNINGS_ARE_ERRORS = -Werroræ•´è¡Œæ³¨é‡Šæ‰
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;:wq&lt;/code&gt;ä¿å­˜é€€å‡ºä¹‹åï¼Œ&lt;code&gt;make clean&lt;/code&gt;å†é‡æ–°&lt;code&gt;make&lt;/code&gt;å³å¯æˆåŠŸç¼–è¯‘ï¼Œæ•´ä¸ªç¼–è¯‘è¿‡ç¨‹æœ‰ç‚¹ä¹…ï¼Œè€å¿ƒç­‰å¾…å³å¯ã€‚&lt;br /&gt;
ç¼–è¯‘æˆåŠŸä¼šå‡ºç°å¦‚ä¸‹æç¤ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;########################################################################
##### Leaving jdk for target(s) sanity all docs images             #####
########################################################################
##### Build time 00:05:21 jdk for target(s) sanity all docs images #####
########################################################################

#-- Build times ----------
Target all_product_build
Start 2022-04-19 06:55:27
End   2022-04-19 07:05:10
00:00:59 corba
00:02:51 hotspot
00:00:08 jaxp
00:00:10 jaxws
00:05:21 jdk
00:00:14 langtools
00:09:43 TOTAL
-------------------------
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;0x03-æ€»ç»“&#34;&gt;0x03 æ€»ç»“&lt;/h2&gt;

&lt;p&gt;Ubuntuç›¸å¯¹äºMacå’ŒWinå¹³å°ï¼Œç¼–è¯‘JDKæ›´å®¹æ˜“ï¼Œä¹‹å‰ä¹Ÿåœ¨MacOSä¸­å°è¯•è¿‡ç¼–è¯‘JDK7ï¼Œç”±äºCommand Line Toolsä¸æ–°ç‰ˆæœ¬macOSä¸å…¼å®¹è€Œä»¥å¤±è´¥å‘Šç»ˆï¼Œåœ¨Ubuntuä¸­è½¯ä»¶åŒ…çš„å®‰è£…æ›´å®½æ¾ï¼Œä½¿å¾—ç¼–è¯‘ç¯å¢ƒæ›´å®¹æ˜“é…ç½®ï¼Œå»ºè®®è€ç‰ˆæœ¬çš„JDKä¼˜å…ˆè€ƒè™‘ä½¿ç”¨Ubuntuè¿›è¡Œç¼–è¯‘ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•åœ¨Ubuntu20.04ä¸­å®‰è£…VMware tools</title>
      <link>http://blog.sinowrt.cn/2022/2022-04-17t2024-how-to-install-vmware-tools-on-ubuntu20.04/</link>
      <pubDate>Sun, 17 Apr 2022 20:24:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-04-17t2024-how-to-install-vmware-tools-on-ubuntu20.04/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;åœ¨vmwareä¸­è£…äº†Ubuntu 20.04ä¹‹åï¼Œè¦å®ç°è™šæ‹Ÿæœºå’Œå®¿ä¸»æœºä¹‹é—´çš„æ–‡ä»¶æˆ–å­—ç¬¦ä¸²æ‹·è´ï¼Œå¿…é¡»å®‰è£…vmware toolsã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-å®‰è£…è¿‡ç¨‹&#34;&gt;0x01 å®‰è£…è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;sudo apt-get update
sudo apt-get install open-vm-tools-desktop -y
sudo reboot&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä¿®å¤echartæ•°æ®ä¸æ˜¾ç¤ºçš„é—®é¢˜â€”â€”â€”â€”æš¨è§£å†³tomcaté»˜è®¤ç¼–ç å¯¼è‡´åç«¯æ¥æ”¶urlencodeå‚æ•°ä¹±ç çš„é—®é¢˜</title>
      <link>http://blog.sinowrt.cn/2022/2022-04-01t1431-decode-issue-while-deployed-with-tomcat/</link>
      <pubDate>Fri, 01 Apr 2022 14:31:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-04-01t1431-decode-issue-while-deployed-with-tomcat/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘æ”¶åˆ°ä¸€ä¸ªå¼€å‘ä»»åŠ¡ï¼Œè™½ç„¶æ˜¯æ–°ç³»ç»Ÿï¼Œä½†æ˜¯æŠ€æœ¯æ¶æ„éå¸¸è€ï¼Œæ˜¯ä½¿ç”¨tomcatè¿›è¡Œéƒ¨ç½²çš„ï¼ˆè¿™å¥è¯è¦è®°å¥½ï¼Œåé¢ä¼šè€ƒçš„ï¼‰ã€‚
è¿™ä¸ªç³»ç»ŸåŸæœ¬å¤–åŒ…å›¢é˜Ÿå·²ç»å¼€å‘å¥½äº†ï¼Œåœ¨å…¬å¸æµ‹è¯•ç¯å¢ƒä¸­è·‘èµ·æ¥çš„æ—¶å€™ï¼Œechartå´ä¸åŠ è½½ï¼Œé‚£ä¹ˆæˆ‘å°±æ¥çœ‹çœ‹æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è¿‡ç¨‹ä¸€&#34;&gt;0x01 è¿‡ç¨‹ä¸€&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæ˜¯å°†é¡¹ç›®åŸºæœ¬ç¯å¢ƒæ­å»ºèµ·æ¥ï¼Œå› ä¸ºæˆ‘çš„ç§»åŠ¨ç”µè„‘è®¿é—®ä¸åˆ°å…¬å¸å†…ç½‘æ•°æ®åº“ï¼Œåœ¨è¿™é‡Œè¿˜ç”¨Goproxyæ­å»ºäº†ä¸€ä¸ªä»£ç†æœåŠ¡ï¼Œç§»åŠ¨ç”µè„‘é€šè¿‡ä»£ç†æœåŠ¡é—´æ¥è¿åˆ°æ•°æ®åº“ã€‚
é¡¹ç›®è·‘èµ·æ¥ä¹‹åï¼Œé€šè¿‡consoleè°ƒè¯•å¤§æ³•ï¼Œå‘ç°åç«¯æ˜¯æœ‰è¿”å›æ•°æ®çš„ï¼Œä½†æ˜¯åˆ°äº†echartä¸­å´æ˜¾ç¤ºä¸å‡ºæ¥ã€‚&lt;br /&gt;
æ—¢ç„¶è¿™æ ·ï¼Œé‚£å°±console.logä¸€ä¸‹echartï¼Œçœ‹çœ‹é‡Œé¢çš„dataæ˜¯å•¥ï¼Œæœ‰æ²¡æœ‰è·Ÿåç«¯è¿”å›çš„ç»“æœåŒ¹é…èµ·æ¥ã€‚
ç»“æœå‘ç°åç«¯è¿”å›çš„æ˜¯å¹¿ä¸œçœæˆ–è€…å¹¿è¥¿å£®æ—è‡ªæ²»åŒºç­‰å…¨ç§°ï¼Œä½†æ˜¯å‰ç«¯çš„dataä¸­å°±åªæ˜¾ç¤ºå„ä¸ªçœä»½çš„ç®€ç§°ï¼šå¹¿ä¸œã€å¹¿è¥¿ç­‰ã€‚&lt;br /&gt;
æ—¢ç„¶æ•°æ®é›†æœ‰äº†ï¼Œä¹Ÿæ¯”è¾ƒå›ºå®šï¼Œé‚£ä¹ˆå°±åœ¨å‰ç«¯å»ºç«‹ä¸€ä¸ªæ˜ å°„å­—å…¸ï¼Œå°†åç«¯è¿”å›çš„å€¼è¿›è¡Œç®€ç§°æ˜ å°„æ›¿æ¢ä¹‹åï¼Œå°±å¯ä»¥æ­£å¸¸åŒ¹é…ä¸Šäº†ã€‚&lt;br /&gt;
è¿™é‡Œè¿˜æœ‰å¦ä¸€ä¸ªåŠæ³•ï¼Œå°±æ˜¯åœ¨echartçš„optionä¸­æ–°å¢ä¸€ä¸ªnameMapï¼Œå°†æ˜ å°„å…³ç³»åŠ ä¸Šï¼Œä¹Ÿèƒ½æ­£å¸¸åŒ¹é…ï¼Œä½†æ˜¯ç”±äºæ˜ å°„åç§°ä¹‹åï¼Œå„çœä»½çš„åç§°æ¯”è¾ƒé•¿ï¼Œæœ‰äº›é‡å æœ‰äº›é”™ä½ï¼Œäºæ˜¯å°±ä¸é€‚ç”¨åœ¨optionä¸­æ·»åŠ nameMapçš„æ–¹æ³•ã€‚&lt;br /&gt;
åœ¨ç»è¿‡ä¸Šé¢çš„å¤„ç†ä¹‹åï¼Œåœ°å›¾ä¸­çš„æ•°æ®ä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤ºäº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è¿‡ç¨‹äºŒ&#34;&gt;0x01 è¿‡ç¨‹äºŒ&lt;/h2&gt;

&lt;p&gt;é™¤äº†è¿‡ç¨‹ä¸€ä¸­çš„åœ°å›¾æ˜¾ç¤ºé—®é¢˜ä¹‹å¤–ï¼Œåœ¨è¯¥åœ°å›¾ä¸‹æ–¹è¿˜æœ‰ä¸€ä¸ªå¯¹åº”ç‚¹å‡»å¯¹åº”çœä»½ï¼Œæ”¾å¤§è¯¥çœå¯ä»¥æ˜¾ç¤ºå„åŒºåŸŸçš„æ•°æ®çš„åŠŸèƒ½ã€‚é¦–å…ˆæ˜¯åœ°å›¾ä¹Ÿé»˜è®¤åŠ è½½ä¸å‡ºæ¥ï¼Œç»æ’æŸ¥ä¹‹åï¼Œç¡®è®¤æ˜¯urlæ‹¼æ¥æœ‰é—®é¢˜ï¼Œæ›´æ­£ä¹‹åå°±å¯ä»¥å‘é€æ•°æ®è¯·æ±‚äº†ï¼Œä½†æ˜¯è¯·æ±‚è¿”å›çš„æ˜¯æ— æ•°æ®ã€‚
åˆç»è¿‡ä¸€ç•ªä»”ç»†æ’æŸ¥ï¼Œç¡®è®¤æ˜¯æŸ¥è¯¢çœä»½çš„æ—¶å€™ï¼Œä¼ åˆ°åç«¯çš„æ˜¯â€œå¹¿ä¸œâ€ï¼Œè€Œéå…¨ç§°â€œå¹¿ä¸œçœâ€ï¼Œè¿™ä¸ªå¥½åŠï¼Œè¿˜æ˜¯è·Ÿä¸Šé¢ä¸€æ ·ï¼ŒåŠ ä¸€ä¸ªæ˜ å°„è¡¨ï¼Œåœ¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œå°†æŸ¥è¯¢å‚æ•°é€šè¿‡æ˜ å°„è¡¨æ˜ å°„ä¸ºå…¨ç§°å³å¯æŸ¥åˆ°æ•°æ®ã€‚&lt;br /&gt;
åŠ äº†æ˜ å°„è¡¨ä¹‹åï¼Œå‘ç°è¿˜æ˜¯æŸ¥ä¸åˆ°ï¼çœ‹äº†åç«¯çš„æ—¥å¿—ï¼Œå‘ç°å‚æ•°æ˜¯ä¹±ç ï¼Œæˆ‘æƒ³äº†ä¸‹ï¼Œä¹‹å‰æˆ‘ä¹Ÿè°ƒæ•´äº†tomcatçš„æ—¥å¿—æ˜¾ç¤ºç¼–ç ï¼Œä¹Ÿæ·»åŠ äº†-Dfileå‚æ•°ï¼Œæ—¥å¿—æ˜¾ç¤ºè¿™ä¸€å—åº”è¯¥æ˜¯æ²¡é—®é¢˜äº†ã€‚é‚£ä¹ˆå°±åªæœ‰å‰ç«¯å‘é€è¯·æ±‚æ—¶æ²¡æœ‰æŒ‡å®šç¼–ç æˆ–è€…åç«¯è§£æå‚æ•°çš„æ—¶å€™è·Ÿå‰ç«¯ç¼–ç ä¸ä¸€è‡´çš„é—®é¢˜äº†ï¼Œäºæ˜¯åœ¨å‰ç«¯æŒ‡å®šäº†content-typeçš„encodingå‚æ•°ï¼Œä½†æ˜¯å‘ç°è¿˜æ˜¯ä¹±ç ã€‚åœ¨åç«¯çš„requestmappingä¸­æŒ‡å®šè§£ç ç¼–ç ä¹Ÿä¸è¡Œã€‚&lt;br /&gt;
å¥½å®¶ä¼™ï¼Œå®åœ¨æ²¡è¾™äº†ï¼Œé‚£å°±å¤åˆ¶ä¹±ç ï¼Œéšä¾¿ç™¾åº¦ä¸€ä¸ªä¹±ç æŸ¥è¯¢çš„ç½‘ç«™ï¼Œå‘ç°åŸå­—ç¬¦ç¼–ç æ˜¯UTF-8ï¼Œè§£æç¼–ç æ˜¯iso8859-1çš„æ—¶å€™ï¼Œæ˜¯èƒ½å¤Ÿè¿˜åŸå›â€œå¹¿ä¸œçœâ€çš„ï¼Œäºæ˜¯çº¿ç´¢åˆå›åˆ°äº†tomcatã€‚&lt;br /&gt;
æŸ¥äº†ä¸€ä¸‹èµ„æ–™ï¼Œå‘ç°é—®é¢˜å°±æ˜¯å‡ºç°åœ¨tomcatä¸Šï¼Œå¦‚æœåœ¨server.xmlä¸­æœªæŒ‡å®šè§£æç¼–ç çš„è¯ï¼Œtomcaté»˜è®¤ç¼–ç å°±æ˜¯iso-8859-1ã€‚&lt;br /&gt;
åŸå› æ‰¾åˆ°äº†ï¼Œå’±æ‰“å¼€tomcatæ ¹ç›®å½•ä¸‹çš„confæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°server.xmlæ–‡ä»¶ï¼Œå°†connectoræŒ‡å®šç¼–ç &lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;Connector  port=&amp;quot;8080&amp;quot; protocol=&amp;quot;HTTP/1.1&amp;quot; connectionTimeout=&amp;quot;20000&amp;quot; redirectPort=&amp;quot;8443&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¿®æ”¹ä¸ºï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-xml&#34;&gt;&amp;lt;Connector useBodyEncodingForURI=&amp;quot;true&amp;quot; URIEncoding=&amp;quot;UTF-8&amp;quot;
            port=&amp;quot;8080&amp;quot; protocol=&amp;quot;HTTP/1.1&amp;quot;
            connectionTimeout=&amp;quot;20000&amp;quot;
            redirectPort=&amp;quot;8443&amp;quot; /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¹‹åï¼Œé‡å¯tomcatå³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è¿‡ç¨‹ä¸‰&#34;&gt;0x01 è¿‡ç¨‹ä¸‰&lt;/h2&gt;

&lt;p&gt;è™½ç„¶è§£å†³äº†å‰ç«¯ä¼ å€¼åˆ°åç«¯çš„ä¹±ç é—®é¢˜ï¼Œä½†æ˜¯åé¢æˆ‘å‘ç°ï¼Œåç«¯ä¼ å›æµè§ˆå™¨çš„å¼€å‘äººå‘˜å·¥å…·ä¸­çš„å€¼ç«Ÿç„¶ä¹Ÿæ˜¾ç¤ºä¹±ç ã€‚&lt;br /&gt;
è¿™åˆæ˜¯å’‹å›äº‹å‘¢ï¼Ÿ
ä»”ç»†çœ‹äº†ä¸€ä¸‹ï¼Œå‘ç°æ˜¯åç«¯è¿”å›çš„æ—¶å€™ï¼Œresponseä¸­çš„headerå¹¶æœªæºå¸¦ç¼–ç ä¿¡æ¯ï¼Œæµè§ˆå™¨æ— æ³•è¯†åˆ«åˆ°ç¼–ç ï¼Œå°±ä½¿ç”¨é»˜è®¤çš„windows-1252è¿›è¡Œè§£æï¼Œå°±äº§ç”Ÿäº†ä¹±ç çš„é—®é¢˜ï¼Œè™½ç„¶ä¼ åˆ°å‰ç«¯æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿åé¢ä¸Šçº¿ä¹‹åçš„è°ƒè¯•ï¼Œè¿˜æ˜¯åˆ°åç«¯æŒ‡å®šäº†Content-Typeçš„headerï¼ŒæŒ‡å®šä¹‹åï¼Œå°±æ­£å¸¸å•¦ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åœ¨windows server 2019ä¸­éƒ¨ç½²gitæœåŠ¡ç«¯</title>
      <link>http://blog.sinowrt.cn/2022/2022-03-28t2024-deploy-a-git-service-on-windows/</link>
      <pubDate>Mon, 28 Mar 2022 20:24:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-03-28t2024-deploy-a-git-service-on-windows/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘å…¬å¸æœ‰äº›æ–‡ä»¶éœ€è¦å…±äº«ï¼ŒååŒç¼–è¾‘ï¼Œå»ºä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹å§ï¼Œåˆå¤ªç³™äº†ï¼Œå¦‚æœèƒ½å¤Ÿè®°å½•ä¸‹æ–‡ä»¶çš„ä¿®æ”¹è®°å½•å°±æ›´å¥½äº†ï¼Œäºæ˜¯æˆ‘æƒ³åˆ°äº†æ­å»ºä¸€ä¸ªgitç§æœï¼Œå¼€å¹²ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-ç¯å¢ƒä»‹ç»&#34;&gt;0x01 ç¯å¢ƒä»‹ç»&lt;/h2&gt;

&lt;p&gt;ç³»ç»Ÿç¯å¢ƒï¼šwindows server 2019&lt;br /&gt;
è½¯ä»¶åŒ…ï¼š&lt;a href=&#34;https://dl.gogs.io/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;gogs&lt;/a&gt;ã€&lt;a href=&#34;https://git-scm.com/download/win&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;git for windows&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;0x02-éƒ¨ç½²è¿‡ç¨‹&#34;&gt;0x02 éƒ¨ç½²è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;å…ˆå®‰è£…git for windowsï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯å®‰è£…ç‰ˆï¼Œå‚»ç“œå¼å®‰è£…å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;å°†ä¸‹è½½çš„gogså‹ç¼©åŒ…è§£å‹å‡ºæ¥ï¼Œcmdè¿›å…¥æ ¹ç›®å½•ï¼Œç›´æ¥è¿è¡Œ./gogs web&lt;/p&gt;

&lt;p&gt;gogsé»˜è®¤æ˜¯ç›‘å¬äº†æœ¬åœ°3000ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨æ‰“å¼€&lt;code&gt;http://localhost:3000/install&lt;/code&gt;è¿›è¡Œåˆå§‹åŒ–é…ç½®&lt;/p&gt;

&lt;p&gt;é…ç½®æŒºç®€å•çš„ï¼Œç‰¹åˆ«è¯´ä¸€ä¸‹è®¾ç½®æ•°æ®åº“ç±»å‹ï¼ˆé€‰SQLite3å³å¯ï¼Œé€‰å…¶ä»–æ•°æ®åº“éœ€è¦å¦å¤–å®‰è£…ï¼‰ï¼Œå…¶ä»–æŒ‰éœ€è®¾ç½®å³å¯&lt;/p&gt;

&lt;p&gt;é…ç½®å®Œæˆä¹‹åæ‰“å¼€&lt;code&gt;http://localhost:3000/&lt;/code&gt;å³å¯è¿›å…¥gogsçš„webç•Œé¢&lt;/p&gt;

&lt;p&gt;å¦‚æœéœ€è¦å¼€æ”¾åˆ°å¤–ç½‘ï¼Œåœ¨é˜²ç«å¢™æ”¾è¡Œç«¯å£å³å¯ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨socks5ä»£ç†ç»•è¿‡é˜²ç«å¢™å®‰å…¨ç­–ç•¥</title>
      <link>http://blog.sinowrt.cn/2022/2022-03-27t2231-bypass-firewall-security-policies-using-a-proxy/</link>
      <pubDate>Sun, 27 Mar 2022 22:31:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2022/2022-03-27t2231-bypass-firewall-security-policies-using-a-proxy/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;å…¬å¸ä¸è®©ä½¿ç”¨å‘æ—¥è‘µè¿œç¨‹äº†ï¼Œåœ¨é˜²ç«å¢™å±è”½äº†å‘æ—¥è‘µï¼ŒåŸæœ¬å¯ä»¥ä½¿ç”¨frpç©¿é€çš„ï¼Œå¥ˆä½•é˜²ç—…æ¯’è½¯ä»¶åˆå¤ªç»™åŠ›äº†ï¼Œåˆšä¸‹è½½ä¸‹æ¥å°±è¢«å¼ºåˆ¶åˆ æ‰ï¼Œå…³åˆå…³ä¸æ‰ï¼Œå¹¶ä¸”å…¬å¸ç”µè„‘æ˜¯win10å®¶åº­ç‰ˆï¼Œé˜‰å‰²äº†è¿œç¨‹æ¡Œé¢åŠŸèƒ½ï¼Œè¿™ä¸ªæ–¹æ¡ˆå°±ç›´æ¥passæ‰äº†ã€‚ç”±äºæ‰‹å¤´ä¸Šæœ‰ç©ºé—²çš„vpsï¼Œäºæ˜¯è½¬è€Œæƒ³åˆ°æ­å»ºsocks5ä»£ç†æœåŠ¡å™¨ï¼Œå†é…ç½®å‘æ—¥è‘µä½¿ç”¨ä»£ç†è¿æ¥å¤–ç½‘å°±å¥½äº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-å‰æœŸå‡†å¤‡&#34;&gt;0x01 å‰æœŸå‡†å¤‡&lt;/h2&gt;

&lt;p&gt;1.å›½å†…VPSä¸€å°ï¼ˆä¿è¯ç½‘ç»œæ›´å¥½æ›´ç¨³å®šï¼‰&lt;br /&gt;
2.&lt;a href=&#34;https://github.com/snail007/goproxy&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;goproxy&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;0x02-æœåŠ¡ç«¯æ­å»º&#34;&gt;0x02 æœåŠ¡ç«¯æ­å»º&lt;/h2&gt;

&lt;p&gt;æ ¹æ®ç³»ç»Ÿå¹³å°ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„goproxyï¼Œæˆ‘ä¸‹è½½çš„æ˜¯windwosç‰ˆæœ¬çš„ï¼Œä¸‹è½½åè§£å‹è¿›å…¥è½¯ä»¶æ ¹ç›®å½•ï¼Œæ ¹æ®è¯´æ˜æ–‡æ¡£ï¼Œè¿è¡Œå‘½ä»¤&lt;code&gt;proxy socks -t tcp -p &amp;quot;0.0.0.0:38080&amp;quot; -g &amp;quot;å…¬ç½‘åœ°å€&amp;quot;--udp-port 0 --udp&lt;/code&gt;ï¼Œå¯åŠ¨æœåŠ¡ã€‚ï¼ˆè®°å¾—æ”¾è¡Œé˜²ç«å¢™ç«¯å£ï¼‰&lt;/p&gt;

&lt;h2 id=&#34;0x03-å‘æ—¥è‘µè¿æ¥ä»£ç†æœåŠ¡å™¨&#34;&gt;0x03 å‘æ—¥è‘µè¿æ¥ä»£ç†æœåŠ¡å™¨&lt;/h2&gt;

&lt;p&gt;æ‰“å¼€å‘æ—¥è‘µç½‘ç»œè®¾ç½®ï¼Œé…ç½®ä»£ç†åœ°å€åŠç«¯å£ï¼Œæµ‹è¯•æç¤ºè¿æ¥æˆåŠŸå³å¯ä¿å­˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x04-æ€»ç»“&#34;&gt;0x04 æ€»ç»“&lt;/h2&gt;

&lt;p&gt;è‡³æ­¤ï¼Œæ•´ä¸ªä»£ç†é…ç½®å·²ç»å®Œæˆäº†ï¼Œè¿‡ç¨‹éš¾ç‚¹ä¸»è¦åœ¨å¯»æ‰¾åˆé€‚çš„ä»£ç†è½¯ä»¶ï¼Œåœ¨githubä¸Šé¢æœæœstarå¤šçš„é¡¹ç›®ä¿è¯æ²¡é”™ã€‚ï¼ˆpsï¼šgoproxyå¤ªå¥½ç”¨äº†ï¼Œè¿˜è·¨å¹³å°ï¼Œå¼ºæ¨ï¼ï¼‰&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åœ¨æ ‘è“æ´¾ï¼ˆARMï¼‰ä¸Šé¢è¿è¡Œhpoolçš„chiaæŒ–çŸ¿ç¨‹åºï¼ˆAMD64ï¼‰</title>
      <link>http://blog.sinowrt.cn/2021/2021-04-23t1847-how-to-run-chia-miner-of-hpool-on-raspberry-pi4/</link>
      <pubDate>Fri, 23 Apr 2021 18:47:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2021/2021-04-23t1847-how-to-run-chia-miner-of-hpool-on-raspberry-pi4/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘chiaæŒ–çŸ¿å¯å¤ªç«äº†ï¼Œå¯æƒœæˆ‘è¿æ°”å¤ªå·®ï¼Œä¸€ä¸ªå¸éƒ½æ²¡æŒ–åˆ°ï¼Œç®—äº†è¿˜æ˜¯ç›´æ¥åŠ å…¥çŸ¿æ± å§ã€‚å¯æ˜¯ç¡¬ç›˜å®¹é‡å·²ç»på®Œäº†ï¼Œç”¨å°å¼æœºæŒ‚æœºçš„è¯ï¼Œæ€•æ˜¯ç”µè´¹éƒ½ä¸å¤Ÿäºå§ã€‚&lt;br /&gt;
ä¹‹å‰åœ¨chiaçš„wikiä¸Šé¢ï¼Œæˆ‘çœ‹åˆ°äº†ä¸€ä¸ªç”¨Rock PI4bç»„è£…çš„çŸ¿æœºï¼Œå¾ˆæ˜¯å¿ƒåŠ¨ã€‚å¯æƒœRock piçš„ç”Ÿæ€æ¯”Raspberry pié€Šè‰²å¾ˆå¤šï¼Œè€Œæˆ‘åˆä¸ä½¿ç”¨å®˜æ–¹è½¯ä»¶è¿›è¡Œè€•ç§ï¼Œåˆ°æ—¶å„ç§é€‚é…èµ·æ¥å¯æ˜¯ä¸ªéº»çƒ¦äº‹ã€‚æ‰€ä»¥ï¼Œåœ¨å¯¹æ¯”ä¹‹ä¸‹æˆ‘è¿˜æ˜¯é€‰æ‹©äº†Raspberry Pi4Bã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-ç¡¬ä»¶å‡†å¤‡&#34;&gt;0x01 ç¡¬ä»¶å‡†å¤‡&lt;/h2&gt;

&lt;h3 id=&#34;1-ä¸€å—æ ‘è“æ´¾raspberry-pi4b&#34;&gt;1. ä¸€å—æ ‘è“æ´¾Raspberry Pi4B&lt;/h3&gt;

&lt;h3 id=&#34;2-sataè½¬usb3-0çš„æ˜“é©±çº¿-å¸¦12vä¾›ç”µç«¯å£çš„-æˆ‘é€‰æ‹©çš„æ˜¯ç»¿å·¨èƒ½çš„-ä¾¿å®œå¥½ç”¨&#34;&gt;2. sataè½¬usb3.0çš„æ˜“é©±çº¿ï¼ˆå¸¦12vä¾›ç”µç«¯å£çš„ï¼‰æˆ‘é€‰æ‹©çš„æ˜¯ç»¿å·¨èƒ½çš„ï¼Œä¾¿å®œå¥½ç”¨&lt;/h3&gt;

&lt;h3 id=&#34;3-atxç”µæºä¸€ä¸ª-æ ¹æ®ä½ ç¡¬ç›˜çš„æ•°é‡æ¥é€‰æ‹©åŠŸç‡-æˆ‘è¿™é‡Œç”¨çš„æ˜¯å®¶é‡Œé—²ç½®çš„200w-é•¿åŸç”µæº&#34;&gt;3. ATXç”µæºä¸€ä¸ªï¼ˆæ ¹æ®ä½ ç¡¬ç›˜çš„æ•°é‡æ¥é€‰æ‹©åŠŸç‡ï¼‰æˆ‘è¿™é‡Œç”¨çš„æ˜¯å®¶é‡Œé—²ç½®çš„200W é•¿åŸç”µæº&lt;/h3&gt;

&lt;h3 id=&#34;4-å¤§4pinæ¥å£è½¬3-5mm-12v-dcæ¥å£-è½¬æ¥çº¿è‹¥å¹²æ¡&#34;&gt;4. å¤§4Pinæ¥å£è½¬3.5mm 12V DCæ¥å£ è½¬æ¥çº¿è‹¥å¹²æ¡&lt;/h3&gt;

&lt;h2 id=&#34;0x02-å…œå…œè½¬è½¬-ä»…è®°å½•è¿‡ç¨‹-è§£å†³æ–¹æ¡ˆå¯ä»¥ç›´æ¥çœ‹ä¸‹ä¸€èŠ‚&#34;&gt;0x02 å…œå…œè½¬è½¬ï¼ˆä»…è®°å½•è¿‡ç¨‹ è§£å†³æ–¹æ¡ˆå¯ä»¥ç›´æ¥çœ‹ä¸‹ä¸€èŠ‚ï¼‰&lt;/h2&gt;

&lt;p&gt;å°†å¯æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ åˆ°æ ‘è“æ´¾ä¸Šé¢ï¼Œç›´æ¥è¿è¡Œçš„æ—¶å€™ ä¼šæç¤º&lt;code&gt;Exec Format Error&lt;/code&gt;ï¼Œå› ä¸ºæ ‘è“æ´¾æ˜¯ARMæ¶æ„çš„ï¼Œè€Œå¯æ‰§è¡Œæ–‡ä»¶æ˜¯AMD64æ¶æ„çš„ã€‚&lt;br /&gt;
å¯æ‰§è¡Œæ–‡ä»¶çš„ä¿¡æ¯å¯ä»¥ä½¿ç”¨&lt;code&gt;file å¯æ‰§è¡Œæ–‡ä»¶&lt;/code&gt;æŸ¥çœ‹ï¼Œå¦‚hpool-miner-chiaè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„ä¿¡æ¯å°±æ˜¯ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;ubuntu@ubuntu:~/linux$ file ./hpool-miner-chia 
./hpool-miner-chia: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically linked, Go BuildID=or4EJC7edY1jm53BAfGR/s_m3PpAuyo9gsjpS3x4h/Eg54hBo5Pfw4tHBF5qZ0/g1_NAK8AbL3R_FIeKSr6, stripped
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥ä½¿ç”¨readelfå‘½ä»¤æŸ¥çœ‹ï¼Œå¦‚&lt;code&gt;readelf -h python&lt;/code&gt;ï¼Œå¾—åˆ°çš„æ˜¯ELF Headerä¸­çš„é¡¹Magicï¼Œç¬¬äº”ä¸ªæ•° 02æ—¶ä¸º64ä½ï¼Œ01æ—¶ä¸º32ä½ã€‚&lt;/p&gt;

&lt;h3 id=&#34;1-box86æ–¹æ¡ˆ&#34;&gt;1. box86æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;ç¬¬ä¸€æ¬¡å°è¯•æ˜¯åœ¨raspberry osä¸Šé¢å®‰è£…box86ï¼Œä½†æ˜¯è¿è¡Œçš„æ—¶å€™å‘ç°box86å¹¶ä¸æ”¯æŒ64ä½å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚ä½œç½¢ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-exagearæ–¹æ¡ˆ&#34;&gt;2. exagearæ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ¡ˆå¹¶æœªå°è¯•ï¼Œå› ä¸ºexagear è·Ÿbox86ä¸€æ ·ï¼Œåªæ”¯æŒ32ä½çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-qemuæ–¹æ¡ˆ&#34;&gt;3. qemuæ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨&lt;code&gt;sudo apt-get install qemu-user&lt;/code&gt;å‘½ä»¤å®‰è£…qemu-userï¼Œè¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨å®‰è£…qemu-userå’Œbinfmtï¼Œbinfmtä¼šé€šè¿‡åˆ¤æ–­å¯æ‰§è¡Œæ–‡ä»¶çš„ç±»å‹ï¼Œè‡ªåŠ¨é€‰æ‹©æ˜¯å¦é€šè¿‡qemuæ¥æ‰§è¡Œè¯¥æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ¡ˆè™½ç„¶æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æ¢ç´¢çš„è¿‡ç¨‹ä¹Ÿæ˜¯ååˆ†æ›²æŠ˜ï¼š&lt;/p&gt;

&lt;p&gt;ç¯å¢ƒ: 32ä½raspios + qemu-user + hpool-miner-chia v1.0.5&lt;br /&gt;
å¯åŠ¨çš„æ—¶å€™æç¤ºï¼šdlopen err: Dynamic loading not supported&lt;br /&gt;
ç„¶åå°±æ˜¯ä¸è®¤plotæ–‡ä»¶ï¼ŒæŠ¥open fail å’Œ Invalid fileçš„é”™è¯¯ï¼Œä½†æ˜¯è¿æ¥çŸ¿æ± æ­£å¸¸ï¼Œåªæ˜¯æ²¡è®¤åˆ°plotæ–‡ä»¶ï¼Œæ²¡æœ‰ç®—åŠ›ï¼Œhpoolä¸Šé¢ä¹Ÿä¸æ˜¾ç¤ºçŸ¿æœºåœ¨çº¿ã€‚&lt;/p&gt;

&lt;p&gt;ç¯å¢ƒ: 32ä½raspios + qemu-user + hpool-miner-chia v1.0.4.1&lt;br /&gt;
å¯åŠ¨çš„æ—¶å€™ä¸æç¤ºdlopen err: Dynamic loading not supportedäº†&lt;br /&gt;
ä½†ä»ç„¶ä¸è®¤plotæ–‡ä»¶ï¼ŒæŠ¥open fail å’Œ Invalid fileçš„é”™è¯¯ï¼Œä½†æ˜¯è¿æ¥çŸ¿æ± æ­£å¸¸ï¼Œåªæ˜¯æ²¡è®¤åˆ°plotæ–‡ä»¶ï¼Œæ²¡æœ‰ç®—åŠ›ï¼Œhpoolä¸Šé¢ä¹Ÿä¸æ˜¾ç¤ºçŸ¿æœºåœ¨çº¿ã€‚&lt;/p&gt;

&lt;p&gt;ç¯å¢ƒ: 64ä½raspios + qemu-user + hpool-miner-chia v1.0.4.1&lt;br /&gt;
å¯åŠ¨çš„æ—¶å€™æç¤º&lt;code&gt;qemu: uncaught target signal 11 (Segmentation fault) - core dumped&lt;/code&gt; ç›´æ¥ç½¢å·¥äº†&lt;/p&gt;

&lt;p&gt;åœ¨28å·ä¸‹åˆï¼Œhpool å‘å¸ƒäº† 1.1.0 ç‰ˆæœ¬çš„ hpool-miner-chiaï¼Œç”±äºå®˜æ–¹è¯´ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¼šæ”¯æŒarmï¼Œä½†æ˜¯å®æµ‹å¹¶æ²¡æœ‰ï¼Œæ²¡æœ‰å°±æ²¡æœ‰å§ï¼Œè¯•ä¸€ä¸‹èƒ½ä¸èƒ½ç”¨qemuè¿è¡Œ&lt;/p&gt;

&lt;p&gt;ç¯å¢ƒ: 32ä½raspios + qemu-user + hpool-miner-chia v1.1.0&lt;br /&gt;
å¯åŠ¨çš„æ—¶å€™ä¸æç¤ºdlopen err: Dynamic loading not supportedäº†&lt;br /&gt;
ä½†ä»ç„¶ä¸è®¤plotæ–‡ä»¶ï¼ŒæŠ¥open fail å’Œ Invalid fileçš„é”™è¯¯ï¼Œä½†æ˜¯è¿æ¥çŸ¿æ± æ­£å¸¸ï¼Œåªæ˜¯æ²¡è®¤åˆ°plotæ–‡ä»¶ï¼Œæ²¡æœ‰ç®—åŠ›ï¼Œhpoolä¸Šé¢ä¹Ÿä¸æ˜¾ç¤ºçŸ¿æœºåœ¨çº¿ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x04-æœ€ç»ˆæ–¹æ¡ˆ&#34;&gt;0x04 æœ€ç»ˆæ–¹æ¡ˆ&lt;/h2&gt;

&lt;p&gt;æˆ‘æ›¾ä¸€åº¦æƒ³ç€æ˜¯ä¸æ˜¯ usb3.0è½¬sata è½¬æ¥çº¿åäº†ï¼Œå°±åœ¨è™šæ‹Ÿæœºä¸Šé¢å¼€äº†ubuntuï¼Œè¿ä¸Šäº†ç¡¬ç›˜ï¼Œè¿è¡Œä¸€åˆ‡æ­£å¸¸ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆé—®é¢˜åº”è¯¥å°±æ˜¯å‡ºåœ¨æ ‘è“æ´¾ä¸Šé¢äº†ï¼Œç”±äºä¹‹å‰ä¸‹è½½äº†ubuntu arm64çš„ç³»ç»Ÿï¼Œä½†æ˜¯é‚£æ™šä¸ŠæŒ‚ç€æµ‹è¯•æ ‘è“æ´¾ç¨³å®šæ€§çš„æ—¶å€™ï¼ŒæŠŠTFå¡çƒ§äº†ï¼Œå°±æ²¡æœ‰ç”¨è¿‡è¿™ä¸ªubuntuç³»ç»Ÿã€‚ç„¶åæˆ‘å°±æƒ³ï¼Œä¼šä¸ä¼šè·Ÿç³»ç»Ÿæœ‰å…³å‘¢ï¼Œè¯•äº†é‚£ä¹ˆå¤šä¸ªç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç»“æœã€‚äºæ˜¯æ‹†ä¸‹TFå¡ï¼Œçƒ§å½•ubuntu arm64çš„ç³»ç»Ÿï¼ŒæŒ‚ç¡¬ç›˜&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;# æŸ¥çœ‹å¾…æŒ‚è½½è®¾å¤‡åˆ—è¡¨
sudo fdisk -l

# æŒ‚è½½ç¡¬ç›˜ æˆ‘åœ¨è¿™é‡Œæ˜¯å°†/dev/sda1æŒ‚è½½åˆ°å½“å‰ç›®å½•çš„plotedæ–‡ä»¶å¤¹ 
sudo mount /dev/sda1 ./ploted

# è§£é™¤æŒ‚è½½
sudo umount /dev/sda1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç¡¬ç›˜æŒ‚è½½å¥½åï¼ŒæŠŠhpool-miner-chia v1.1.0 ç‰ˆæœ¬çš„æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ ä¸Šå»ï¼Œ&lt;code&gt;sudo apt-get install qemu-user&lt;/code&gt;å®‰è£…qemu-userã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;qemu-x86_64 ./hpool-miner-chia&lt;/code&gt;è¿è¡Œã€‚ç«Ÿç„¶å¥½äº†ï¼ï¼&lt;/p&gt;

&lt;p&gt;è™½ç„¶ä¸æŠ¥é”™ï¼Œä¹Ÿèƒ½è®¤plotæ–‡ä»¶äº†ï¼Œä½†æ˜¯æŒ‚äº†ä¸€æ™šä¸Šæµ‹è¯•å‘ç°ï¼Œè¿™ä¸ªè½¯ä»¶ä¼šè‡ªå·±é€€å‡ºã€‚&lt;/p&gt;

&lt;p&gt;è¿™å¥½åŠï¼Œä¸Šsupervisorå°±å¥½äº†ï¼Œå…·ä½“æ­¥éª¤è¯·å‚è€ƒ&lt;a href=&#34;https://blog.sinowrt.cn/2020/2020-04-12t2330-ubuntuadd-ngrok-to-supervisor/&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;è¿™ç¯‡åšå®¢&lt;/a&gt;è‡ªè¡Œé…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åé™„ä¸Šubuntuçš„ç‰ˆæœ¬: ubuntu-20.04.2-preinstalled-server-arm64+raspi.img.xz&lt;/p&gt;

&lt;p&gt;èªæ˜çš„å½¦ç¥–ä»¬åº”è¯¥çŸ¥é“æ€ä¹ˆä¸‹è½½çš„ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•å°†ç¾¤æ™–çš„è½¯ä»¶åŒ…å’Œèµ„æ–™è½¬ç§»åˆ°å¦ä¸€ä¸ªç¡¬ç›˜</title>
      <link>http://blog.sinowrt.cn/2021/2021-04-22t1330-how-to-move-the-package-and-documents-in-synology-to-another-hard-disk/</link>
      <pubDate>Thu, 22 Apr 2021 13:30:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2021/2021-04-22t1330-how-to-move-the-package-and-documents-in-synology-to-another-hard-disk/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘ç½‘ä¸Šåˆ®èµ·äº†chiaé£ï¼Œç”±äºæ‰‹ä¸Šä¹Ÿæœ‰å¤§å®¹é‡ç¡¬ç›˜ï¼Œä½†æ˜¯æŒ‚åœ¨ç¾¤æ™–ä¸Šåšå­˜å‚¨ç›˜ï¼Œäºæ˜¯æƒ³å°†è¿™ä¸ªç›˜è…¾å‡ºæ¥ï¼Œå°†èµ„æ–™è½¬ç§»åˆ°å¦ä¸€ä¸ªç¡¬ç›˜ä¸­ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è¿‡ç¨‹&#34;&gt;0x01 è¿‡ç¨‹&lt;/h2&gt;

&lt;h3 id=&#34;1-æ·»åŠ æ–°ç¡¬ç›˜&#34;&gt;1. æ·»åŠ æ–°ç¡¬ç›˜&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆéœ€è¦å‡†å¤‡ä¸€ä¸ªå®Œå…¨æ“¦é™¤çš„ç¡¬ç›˜ï¼Œå°†ç¾¤æ™–å…³æœºåï¼Œå°†è¯¥ç¡¬ç›˜æ¥å…¥ç¾¤æ™–ã€‚å¯åŠ¨ç¾¤æ™–ä¹‹åï¼Œæ‰“å¼€Storage Manageræ–°å»ºä¸€ä¸ªraid groupï¼ˆæˆ‘åŸæ¥æ˜¯ç”¨å•ç›˜å»ºç«‹çš„basic raid groupï¼‰ï¼Œå»ºç«‹å¥½åå†æ–°å»ºä¸€ä¸ªVolumeï¼Œå¦‚æœå‹¾é€‰äº†å…¨ç›˜æ‰«æçš„è¯ï¼Œéœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½å»ºå¥½ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-è½¬ç§»èµ„æ–™&#34;&gt;2. è½¬ç§»èµ„æ–™&lt;/h3&gt;

&lt;p&gt;èµ„æ–™çš„è½¬ç§»æ¯”è¾ƒç®€å•ï¼Œæ‰“å¼€Control Panel - Shared Folderï¼Œé€‰æ‹©éœ€è¦è½¬ç§»çš„å…±äº«æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»Editï¼Œå†Locationä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©æ–°å»ºçš„Volumeå³å¯è‡ªåŠ¨è½¬ç§»ã€‚&lt;/p&gt;

&lt;h3 id=&#34;3-è½¬ç§»package&#34;&gt;3. è½¬ç§»package&lt;/h3&gt;

&lt;p&gt;è½¬ç§»packageéœ€è¦ç”¨åˆ°ä¸€ä¸ªè½¯ä»¶MODS Package Managerï¼Œæˆ‘åœ¨&lt;a href=&#34;https://www.beatificabytes.be/sspks&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;https://www.beatificabytes.be/sspks&lt;/a&gt; ä¸Šé¢ä¸‹è½½ä¸‹æ¥ï¼Œå†åœ¨Package Centerä¸­æ‰‹åŠ¨ä¸Šä¼ å®‰è£…çš„ã€‚&lt;br /&gt;
åœ¨æ‰“å¼€Package Managerçš„æ—¶å€™é‡åˆ°ç™½å±çš„é—®é¢˜ï¼ŒåŸå› æ˜¯è¯¥è½¯ä»¶çš„ä¸€ä¸ªJSéœ€è¦ä»è°·æ­Œä¸‹è½½ï¼Œæ‰“å¼€fqè½¯ä»¶ä»£ç†ä¸€ä¸‹å³å¯è§£å†³ã€‚ï¼ˆå¦‚æœæ²¡æœ‰fqæ¡ä»¶çš„è¯ï¼Œä¹Ÿå¯ä»¥å‚ç…§&lt;a href=&#34;https://blog.csdn.net/qq_17311873/article/details/109536316&#34; rel=&#34;nofollow noreferrer&#34; target=&#34;_blank&#34;&gt;è¿™ç¯‡åšå®¢&lt;/a&gt; æ”¹æˆå›½å†…å¯ä»¥è®¿é—®çš„cdnå³å¯è§£å†³ï¼‰
è½¯ä»¶çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œé€‰æ‹©éœ€è¦ç§»åŠ¨çš„packageï¼Œç„¶åé€‰æ‹©ç›®æ ‡Volumeï¼Œç‚¹å‡»Move Packageå³å¯ã€‚
æœ‰äº›è½¯ä»¶åœ¨è½¬ç§»è¿‡ç¨‹ä¸­ä¼šå¤±è´¥ï¼Œå¥—ä»¶æ²¡æœ‰ç§»åŠ¨æˆåŠŸï¼Œå¯ä»¥ä¸ç”¨ç®¡å®ƒã€‚æ‰“å¼€Package Centerï¼Œä¼šæç¤ºè¯¥å¥—ä»¶é”™è¯¯æ— æ³•è¿è¡Œï¼Œè¿™æ—¶å€™ç‚¹å‡»ä¿®å¤å³å¯å®Œæˆå¥—ä»¶çš„è½¬ç§»äº†ã€‚&lt;/p&gt;

&lt;h3 id=&#34;4-è½¬ç§»momentsé‡Œé¢çš„ç…§ç‰‡&#34;&gt;4. è½¬ç§»Momentsé‡Œé¢çš„ç…§ç‰‡&lt;/h3&gt;

&lt;p&gt;Momentsçš„ç…§ç‰‡æ˜¯å­˜åœ¨/homes å…±äº«ç›®å½•ä¸­çš„ï¼Œæ‰€ä»¥åªè¦å°†è¯¥å…±äº«ç›®å½•æŒ‰æ­¥éª¤2è¿›è¡Œè½¬ç§»å³å¯ï¼Œè¿™ä¸€æ­¥ä¹Ÿå¯ä»¥åœ¨Control Panel - User - User Home - Locationçš„ä¸‹æ‹‰æ¡†é€‰æ‹©è½¬ç§»åˆ°æ–°å·ã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯Driveçš„æ•°æ®åº“çš„è½¬ç§»ï¼Œæ‰“å¼€Drive Admin Console - Settings - Database Location é€‰æ‹©è½¬ç§»åˆ°ç›®æ ‡å·ä¸­å³å¯ã€‚ï¼ˆåœ¨ç¾¤æ™–çš„å®˜ç½‘ä¸­åˆè¯´åˆ°ï¼Œåœ¨Storage Managerå®‰å…¨åœ°ç§»é™¤Volumeä¹Ÿå¯ä»¥è½¬ç§»æ•°æ®åº“ï¼Œä½†æˆ‘é€‰æ‹©ç¨³å¦¥ä¸€ç‚¹ï¼Œæ‰‹åŠ¨è½¬ç§»ï¼‰&lt;/p&gt;

&lt;h3 id=&#34;5-å®‰å…¨ç§»é™¤å·&#34;&gt;5. å®‰å…¨ç§»é™¤å·&lt;/h3&gt;

&lt;p&gt;æœ€åä¸€æ­¥ï¼Œæˆ‘æ˜¯ç›´æ¥å…³æœºï¼Œå°†æ—§ç›˜ç›´æ¥æ‘˜ä¸‹ï¼Œç„¶åå¼€æœºçœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¼‚å¸¸ï¼Œç¡®ä¿æ•°æ®éƒ½å®‰å…¨åœ°è½¬ç§»åˆ°äº†æ–°å·ã€‚&lt;br /&gt;
æœ€åå†å°†æ—§ç›˜è£…ä¸Šï¼Œåœ¨Storage Managerä¸­å®‰å…¨åœ°ç§»é™¤å·ï¼Œå°†æ—§ç›˜å–ä¸‹æ¥ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x02-é‡åˆ°çš„é—®é¢˜&#34;&gt;0x02 é‡åˆ°çš„é—®é¢˜&lt;/h2&gt;

&lt;p&gt;åœ¨è½¬ç§»èµ„æ–™çš„ç¬¬4æ­¥ä¸­ï¼Œæˆ‘æ²¡æœ‰è½¬ç§»Driveçš„æ•°æ®åº“ï¼Œç›´æ¥æ‘˜ä¸‹äº†ç¡¬ç›˜ï¼Œå¹¶å¯åŠ¨äº†ç¾¤æ™–ï¼Œåœ¨package centerä¸Šé¢ä¿®å¤äº†Drive å’Œ Momentsï¼Œå¯¼è‡´Momentsä¸å¯ç”¨ã€‚&lt;br /&gt;
æœ€åè¿˜æ˜¯å°†æ—§ç›˜è£…ä¸Šï¼Œåœ¨Drive Admin Consoleä¸­è½¬ç§»äº†æ•°æ®åº“ï¼Œç„¶åå°†Momentså¥—ä»¶è¿åŒæ•°æ®åº“ä¸€èµ·åˆ é™¤ï¼Œå†é‡è£…æ‰è§£å†³äº†é—®é¢˜ã€‚
è¿™æ ·çš„è¯ï¼Œå°±ä¸¢å¤±äº†ä¹‹å‰Momentsç´¢å¼•çš„ä¿¡æ¯ï¼Œæ²¡å…³ç³»ç›´æ¥å†ç´¢å¼•ä¸€éå°±å¥½äº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ç”¨pythonä¸‹è½½ä¸ƒç‰›äº‘çš„å›¾ç‰‡å¹¶æ‰¹é‡é‡å‘½å</title>
      <link>http://blog.sinowrt.cn/2021/2021-03-10t1451-using-python-to-download-pictures-from-qiniu-and-batch-rename/</link>
      <pubDate>Wed, 10 Mar 2021 14:51:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2021/2021-03-10t1451-using-python-to-download-pictures-from-qiniu-and-batch-rename/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æœ€è¿‘æƒ³è¦æ­å»ºä¸€ä¸ªå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå¹¶æŠŠåŸæœ¬åœ¨ä¸ƒç‰›äº‘ä¸Šé¢çš„å›¾ç‰‡å…¨éƒ¨è½¬ç§»åˆ°è¯¥æœåŠ¡ä¸­ç®¡ç†ï¼Œä½†æ˜¯ä¸ƒç‰›äº‘ä¸Šé¢çš„å›¾ç‰‡å‘½åæœ¬æ¥å°±å¾ˆä¹±ï¼Œä¸ç¬¦åˆæ‰¹é‡ç®¡ç†çš„è¦æ±‚ï¼Œæ‰€ä»¥ä¸èƒ½ä»ä¸ƒç‰›äº‘ç›´æ¥ä¸‹è½½ï¼Œè€Œæ˜¯è¦æŠŠå›¾ç‰‡åæ ¼å¼åŒ–ä¸€ä¸‹ï¼Œå†ä¸‹è½½ä¸‹æ¥ï¼Œè¿™ç§å·¥ä½œï¼Œç”¨pythonæ˜¯æœ€é€‚åˆä¸è¿‡äº†ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è¿‡ç¨‹&#34;&gt;0x01 è¿‡ç¨‹&lt;/h2&gt;

&lt;h3 id=&#34;1-å‘½åè§„åˆ™è½¬æ¢&#34;&gt;1. å‘½åè§„åˆ™è½¬æ¢&lt;/h3&gt;

&lt;p&gt;åŸæœ¬å›¾ç‰‡çš„å‘½åæ˜¯&lt;code&gt;images/1979-01-01T0000/1.png&lt;/code&gt;è¿™æ ·çš„æ ¼å¼ï¼Œç°åœ¨è¦ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥éœ€è¦å»æ‰imagesæ–‡ä»¶å¤¹ï¼Œå¹¶æŠŠæ—¶é—´å’Œå›¾ç‰‡åé€šè¿‡&amp;rdquo;-&amp;ldquo;æ‹¼æ¥èµ·æ¥ã€‚&lt;/p&gt;

&lt;h3 id=&#34;2-å°†ä¸ƒç‰›äº‘ä¸Šé¢çš„æ–‡ä»¶ååŠå…¶å¯¹åº”çš„urlåˆ—è¡¨å¯¼å‡º&#34;&gt;2. å°†ä¸ƒç‰›äº‘ä¸Šé¢çš„æ–‡ä»¶ååŠå…¶å¯¹åº”çš„urlåˆ—è¡¨å¯¼å‡º&lt;/h3&gt;

&lt;p&gt;è¿™ä¸€æ­¥å¯ä»¥ç›´æ¥åœ¨ä¸ƒç‰›äº‘ä¸Šé¢æ‰¹é‡æ“ä½œï¼Œå¯¼å‡ºçš„æ–‡ä»¶æ˜¯æ˜¯csvæ ¼å¼çš„ï¼Œæ‰€ä»¥åœ¨pythonä¸­å¯ä»¥ä½¿ç”¨csvåº“ç›´æ¥è¿›è¡Œè¯»å–&lt;/p&gt;

&lt;h3 id=&#34;3-ç¼–å†™ä»£ç &#34;&gt;3. ç¼–å†™ä»£ç &lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;import requests
import csv

def download_img(img_url, api_token, name):
    print (img_url)
    header = {&amp;quot;Authorization&amp;quot;: &amp;quot;Bearer &amp;quot; + api_token} # è®¾ç½®http headerï¼Œè§†æƒ…å†µåŠ éœ€è¦çš„æ¡ç›®ï¼Œè¿™é‡Œçš„tokenæ˜¯ç”¨æ¥é‰´æƒçš„ä¸€ç§æ–¹å¼
    r = requests.get(img_url, headers=header, stream=True)
    print(r.status_code) # è¿”å›çŠ¶æ€ç 
    if r.status_code == 200:
        open(&#39;C:\\Users\\Jacky\\Pictures\\blogpic\\&#39; + name, &#39;wb&#39;).write(r.content) # å°†å†…å®¹å†™å…¥å›¾ç‰‡
        print(&amp;quot;done&amp;quot;)
    del r

if __name__ == &#39;__main__&#39;:
    api_token = &amp;quot;apitoken&amp;quot;

    record = csv.reader(open(&#39;urls&#39;, &#39;r&#39;, encoding=&#39;utf-8-sig&#39;))
    for i in record:
        name = i[0]
        # æ”¹å
        name = name[7:].replace(&#39;/&#39;, &#39;-&#39;)
        # æå–å›¾ç‰‡é“¾æ¥
        url = i[1]
        download_img(url, api_token, name)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;0x02-æ€»ç»“&#34;&gt;0x02 æ€»ç»“&lt;/h2&gt;

&lt;p&gt;éå¸¸ç®€å•ï¼Œå°±å°è£…ä¸€ä¸ªè¯·æ±‚å‡½æ•°ï¼Œç„¶åè¯»å–csvæ–‡ä»¶é‡Œé¢çš„å­—æ®µï¼Œç»™å›¾ç‰‡é‡å‘½åå¹¶æŠŠurlä¼ å…¥è¯·æ±‚å‡½æ•°ï¼ŒæŠŠå›¾ç‰‡ä¸‹è½½åˆ°æŒ‡å®šç›®å½•ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ç”¨dockerå®‰è£…minioå¯¹è±¡å­˜å‚¨æœåŠ¡</title>
      <link>http://blog.sinowrt.cn/2021/2021-03-09t2224-how-to-install-minio-with-docker/</link>
      <pubDate>Tue, 09 Mar 2021 22:24:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2021/2021-03-09t2224-how-to-install-minio-with-docker/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;åšå®¢é‡Œé¢çš„å›¾ç‰‡ä¹‹å‰ä½¿ç”¨çš„æ˜¯ä¸ƒç‰›äº‘çš„å¯¹è±¡å­˜å‚¨ï¼Œç”¨httpåè®®ä¼ è¾“çš„ï¼Œè‡ªchromeæ›´æ–°ä¹‹åå°±å‡ºç°äº†å¼ºåˆ¶è·³è½¬httpsçš„é—®é¢˜ï¼Œè€Œç”¨æ–°ç‰ˆedgeè¿˜æ˜¯å¯ä»¥æ‰“å¼€çš„ï¼Œä½†æ˜¯ä»Šå¤©æˆ‘çªç„¶å‘ç°edgeä¹Ÿä¸å¥½ä½¿äº†ï¼Œéƒ½ä¼šå¼ºåˆ¶è·³è½¬httpsã€‚è€Œä¸ƒç‰›äº‘é‡Œé¢çš„httpsæ˜¯æ”¶è´¹çš„ï¼Œæ—¢ç„¶æˆ‘æœ‰æœåŠ¡å™¨ï¼Œæœ‰åŸŸåé‚£å°±ç‰©å°½å…¶ç”¨æ­ä¸€ä¸ªå¯¹è±¡å­˜å‚¨æœåŠ¡å§ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è¿‡ç¨‹&#34;&gt;0x01 è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;ç”±äºæˆ‘çš„æœºå™¨ä¹‹å‰å·²ç»å®‰è£…äº†dockerï¼Œdockerçš„å®‰è£…è¿‡ç¨‹å°±ä¸èµ˜è¿°äº†ï¼Œå’±ä»¬ç›´æ¥ä»minioå®‰è£…è¯´èµ·ã€‚&lt;/p&gt;

&lt;h3 id=&#34;1-é¦–å…ˆæŠŠminioçš„é•œåƒæ‹‰ä¸‹æ¥&#34;&gt;1. é¦–å…ˆæŠŠminioçš„é•œåƒæ‹‰ä¸‹æ¥&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;docker pull minio/minio&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;2-åˆ›å»ºdocker-compose-ymlæ–‡ä»¶-å†™å…¥ä»¥ä¸‹å†…å®¹&#34;&gt;2. åˆ›å»ºdocker-compose.ymlæ–‡ä»¶,å†™å…¥ä»¥ä¸‹å†…å®¹&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;version: &#39;3.1&#39;
services: 
    minio:
      image: minio/minio
      container_name: minio
      restart: always
      ports:
        - 9000:9000
      command: server /data  #æŒ‡å®šå®¹å™¨ä¸­çš„ç›®å½• /data
      environment:
        MINIO_ACCESS_KEY: minio    #ç®¡ç†åå°ç”¨æˆ·å
        MINIO_SECRET_KEY: minioxxx #ç®¡ç†åå°å¯†ç ï¼Œæœ€å°8ä¸ªå­—ç¬¦
      volumes:
        - ./data:/data              #æ˜ å°„å½“å‰ç›®å½•ä¸‹çš„dataç›®å½•è‡³å®¹å™¨å†…/dataç›®å½•
        - ./config:/root/.minio/     #æ˜ å°„é…ç½®ç›®å½•
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-é…ç½®è¯ä¹¦&#34;&gt;3. é…ç½®è¯ä¹¦&lt;/h3&gt;

&lt;p&gt;åœ¨è…¾è®¯äº‘ä¸Šé¢ç”³è¯·äº†å…è´¹çš„è¯ä¹¦ï¼Œè§£å‹åå°†Apacheä¸­çš„xx.crtå’Œxx.keyæ–‡ä»¶åˆ†åˆ«æ”¹åä¸ºpublic.crtå’Œprivate.keyåæ”¾åˆ°minioçš„config/certæ–‡ä»¶å¤¹ä¸­ã€‚&lt;/p&gt;

&lt;h3 id=&#34;4-ä»¥deamonæ¨¡å¼å¯åŠ¨minioæœåŠ¡&#34;&gt;4. ä»¥deamonæ¨¡å¼å¯åŠ¨minioæœåŠ¡&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;docker-compose up -d&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;5-é…ç½®è®¿é—®ç­–ç•¥&#34;&gt;5. é…ç½®è®¿é—®ç­–ç•¥&lt;/h3&gt;

&lt;p&gt;ç½‘é¡µç™»å½•minioï¼Œç„¶åæ–°å»ºä¸€ä¸ªbucketï¼Œç‚¹å‡»æ–°å»ºçš„bucketå³è¾¹ä¸‰ä¸ªç‚¹ï¼Œç‚¹å‡»Edit policyï¼Œprefixå¡«å…¥*ï¼Œç”±äºè¯¥bucketæ˜¯ç”¨ä½œåšå®¢çš„å›¾åºŠçš„ï¼Œæ‰€ä»¥ç­–ç•¥é€‰æ‹©read onlyï¼Œæœ€åç‚¹å‡»Addå³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x02-é‡åˆ°çš„é—®é¢˜&#34;&gt;0x02 é‡åˆ°çš„é—®é¢˜&lt;/h2&gt;

&lt;h3 id=&#34;1-æµè§ˆå™¨æç¤ºerr-cert-common-name-invalidé”™è¯¯&#34;&gt;1. æµè§ˆå™¨æç¤ºERR_CERT_COMMON_NAME_INVALIDé”™è¯¯&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºå½“æ—¶æ²¡æœ‰æ·»åŠ åŸŸåè§£æï¼Œç›´æ¥ä½¿ç”¨äº†ipåŠ ç«¯å£è®¿é—®ï¼Œä¸è¯ä¹¦é‡Œé¢çš„åŸŸåä¸åŒ¹é…è€Œæç¤ºçš„ä¸å®‰å…¨è¿æ¥é—®é¢˜ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä¸ºä»€ä¹ˆæŒ‚è½½åœ¨dockerå®¹å™¨ä¸­çš„é…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºä¸­ä¿®æ”¹åå´æ²¡ç”Ÿæ•ˆ</title>
      <link>http://blog.sinowrt.cn/2021/2021-03-09t1530-why-configuration-file-mounted-in-docker-has-no-effect-after-modified-in-host/</link>
      <pubDate>Tue, 09 Mar 2021 15:30:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2021/2021-03-09t1530-why-configuration-file-mounted-in-docker-has-no-effect-after-modified-in-host/</guid>
      <description>

&lt;h2 id=&#34;0x00-èƒŒæ™¯&#34;&gt;0x00 èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;æˆ‘æƒ³åœ¨æœåŠ¡å™¨ä¸­ä½¿ç”¨nginxå¯¹ä¸åŒå­åŸŸåçš„ç½‘é¡µè¿›è¡Œåˆ†æµï¼Œäºæ˜¯ç¼–è¾‘nginxçš„é…ç½®æ–‡ä»¶ï¼Œç”±äºè¯¥é…ç½®æ–‡ä»¶ä»dockeré‡Œé¢æ˜ å°„å‡ºæ¥äº†ï¼Œæ‰€ä»¥æˆ‘å°±åªåœ¨å®¿ä¸»æœºé‡Œé¢ä½¿ç”¨vimä¿®æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œç„¶åè®©å®¹å™¨æ‰§è¡Œå‘½ä»¤&lt;code&gt;docker exec -it containerID nginx -s reload&lt;/code&gt;ï¼Œä½†æ˜¯ä¼¼ä¹æ²¡æœ‰ç”Ÿæ•ˆï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x01-è¿‡ç¨‹&#34;&gt;0x01 è¿‡ç¨‹&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨å‘½ä»¤è¿›å…¥å®¹å™¨é‡Œé¢æŸ¥çœ‹ï¼Œé…ç½®æ–‡ä»¶æ²¡æœ‰ç«Ÿç„¶è¿˜æ˜¯ä¹‹å‰çš„ï¼Œæ²¡æœ‰è¢«ä¿®æ”¹ã€‚äºæ˜¯ï¼Œä¸Šå»æœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°è¿™é‡Œé¢è¿˜çœŸæœ‰å‘ã€‚&lt;/p&gt;

&lt;h3 id=&#34;é—®é¢˜åŸå› &#34;&gt;é—®é¢˜åŸå› ï¼š&lt;/h3&gt;

&lt;p&gt;dockeræŒ‚è½½æ–‡ä»¶æ—¶ï¼Œå¹¶ä¸æ˜¯æŒ‚è½½äº†æŸä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œæ˜¯æŒ‚è½½äº†å¯¹åº”çš„æ–‡ä»¶ï¼Œå³æŒ‚è½½äº†linuxæŒ‡å®šçš„inodeæ–‡ä»¶ã€‚&lt;br /&gt;
å½“ä½¿ç”¨vimä¹‹ç±»çš„ç¼–è¾‘å™¨è¿›è¡Œä¿å­˜æ—¶ï¼Œå®ƒä¸æ˜¯ç›´æ¥ä¿å­˜æ–‡ä»¶ï¼Œè€Œæ˜¯é‡‡ç”¨äº†å¤‡ä»½ã€æ›¿æ¢çš„ç­–ç•¥ï¼Œå°±æ˜¯ç¼–è¾‘æ—¶ï¼Œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œåœ¨ä¿å­˜çš„æ—¶å€™ï¼ŒæŠŠå¤‡ä»½æ–‡ä»¶æ›¿æ¢æºæ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™æ–‡ä»¶çš„ inode å°±å‘ç”Ÿäº†å˜åŒ–ï¼Œè€ŒåŸæ¥ inode å¯¹åº”çš„æ–‡ä»¶å…¶å®å¹¶æ²¡æœ‰ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯å®¹å™¨å†…çš„æ–‡ä»¶æ²¡æœ‰å˜åŒ–ã€‚å½“é‡å¯å®¹å™¨çš„æ—¶å€™ï¼Œä¼šæŒ‚è½½æ–°çš„ inodeã€‚&lt;/p&gt;

&lt;h2 id=&#34;0x02-æ€»ç»“&#34;&gt;0x02 æ€»ç»“&lt;/h2&gt;

&lt;p&gt;åœ¨dockerä¸­åº”è¯¥å°½é‡æŒ‚è½½ç›®å½•ï¼Œé¿å…æŒ‚è½½æ–‡ä»¶ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•è§£å†³cannot run bzip2: No such file or directoryé”™è¯¯</title>
      <link>http://blog.sinowrt.cn/2021/2021-03-09t0930-cannot-run-bzip2-no-such-file-or-directory/</link>
      <pubDate>Tue, 09 Mar 2021 09:30:00 +0800</pubDate>
      
      <guid>http://blog.sinowrt.cn/2021/2021-03-09t0930-cannot-run-bzip2-no-such-file-or-directory/</guid>
      <description>

&lt;h2 id=&#34;0x00-é”™è¯¯æè¿°&#34;&gt;0x00 é”™è¯¯æè¿°&lt;/h2&gt;

&lt;p&gt;ä»Šå¤©åœ¨ä½¿ç”¨tarè§£å‹æ–‡ä»¶çš„æ—¶å€™ï¼ŒæŠ¥äº†ä¸€ä¸ªé”™
&lt;code&gt;cannot run bzip2: No such file or directory&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;0x01-è§£å†³æ–¹æ³•&#34;&gt;0x01 è§£å†³æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºç³»ç»Ÿä¸­ç¼ºå°‘bzip2ï¼Œä½¿ç”¨yumå®‰è£…ä¸Šå°±å¥½äº†
&lt;code&gt;yum -y install bzip2&lt;/code&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>